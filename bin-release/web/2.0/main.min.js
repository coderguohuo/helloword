var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,a=arguments.length;a>i;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},HaoYou_Add_Item=function(t){function e(){var e=t.call(this)||this;return e.skinName="haoyou_add_item",e}return __extends(e,t),e.prototype.createChildren=function(){this.btn_yes.label="添加好友",this.btn_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Add,this)},e.prototype.dataChanged=function(){null!=this.data.avatar&&""!=this.data.avatar?this.img.source=this.data.avatar:this.img.source="icon1_png",this.lab_name.text=this.data.nickname,this.lab_userid.text=this.data.userid},e.prototype.Add=function(){var t=this;FachUtils.Post("/user/friend/"+this.data.userid,{},function(e){e.status?(PopoP.getTips(e.message),t.btn_yes.label="已发送"):PopoP.getTips(e.message)},function(t){})},e}(eui.ItemRenderer);__reflect(HaoYou_Add_Item.prototype,"HaoYou_Add_Item");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function a(a){e.call(i,a,t)}if(RES.hasRes(t)){var s=RES.getRes(t);s?a(s):RES.getResAsync(t,a,this)}else RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var BaHe_LingQu=function(t){function e(){var e=t.call(this)||this;return e.index=0,e.skinName="zhuanpan_result",e}return __extends(e,t),e.prototype.createChildren=function(){},e.prototype.Touch=function(){Director.getInstance().removeSceneNoTw(this)},e.prototype.setDate=function(t){this.data=t,this.index=0,this.BeginFily()},e.prototype.BeginFily=function(){this.twFly(this.data[this.index])},e.prototype.twFly=function(t){1==t.bendi?this.img.source=t.img:this.img.source=Fach.host+t.img,this.lab_name.text=t.name,this.lab_num.text="x"+t.count,this.group.scaleX=.3,this.group.scaleY=.3,this.group.x=375,this.group.y=667,egret.Tween.get(this.group).to({scaleY:1,scaleX:1},200).to({},1e3).to({scaleY:.3,scaleX:.3,x:this.img_beibao.x,y:this.img_beibao.y},500).call(function(){this.index==this.data.length-1?this.Touch():(this.index++,this.twFly(this.data[this.index]))},this)},e}(eui.Component);__reflect(BaHe_LingQu.prototype,"BaHe_LingQu");var BaHe_Result=function(t){function e(){var e=t.call(this)||this;return e.jiangpindata=[],e.skinName="bahe_result",e}return __extends(e,t),e.prototype.createChildren=function(){this.rec_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Yes,this)},e.prototype.setDate=function(t){switch(this.data=t,t.tuggingRecords.winner){case 0:this.img_lab.source="pingju_png",this.img_title.source="title_yellow_png",this.img_bg.source="dadou_shibai1_png",this.lab_title.textColor=16777215,this.jiangpindata[0]={name:"红包",count:t.tuggingRecords.hb,img:"hongbao2_png",bendi:1};break;case 1:this.img_lab.source="dadou_shibai_png",this.img_title.source="title_blue_png",this.img_bg.source="dadou_shibai1_png",this.lab_title.textColor=16777215,this.jiangpindata=t.tuggingRecords.props;break;case 2:this.img_lab.source="dadouchenggong_png",this.img_title.source="title_red_png",this.img_bg.source="dadou_shibai2_png",this.lab_title.textColor=16770181,this.jiangpindata[0]={name:"红包",count:t.tuggingRecords.hb,img:"hongbao2_png",bendi:1}}},e.prototype.Yes=function(){var t=this;FachUtils.Get("/tug/harvest/"+this.data.tuggingRecords._id,function(e){if(e.status){var i=new BaHe_LingQu;i.setDate(t.jiangpindata),Director.getInstance().pushSceneScal(i),Director.getInstance().removeSceneNoTw(t)}},function(t){})},e}(eui.Component);__reflect(BaHe_Result.prototype,"BaHe_Result");var BaHe=function(t){function e(e){var i=t.call(this)||this;return i.isHttp=!1,i.data=e,i.skinName="bahe",i}return __extends(e,t),e.prototype.createChildren=function(){this.btn_yaoqing.addEventListener(egret.TouchEvent.TOUCH_TAP,this.YaoQing,this),this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.Remove,this),this.item=new BaHeDragon,this.item.horizontalCenter=0,this.item.bottom=450,this.item.setDate("拔河比赛_1"),this.addChild(this.item),this.timer=new DateTimer(1e3,0),this.timer.addEventListener(egret.TimerEvent.TIMER,this.Timer,this),this.init()},e.prototype.Timer=function(){this.lab_time.text=DataUtils.DaoJiShi(this.data.tuggingRecords.createTime+60*this.data.tugSetting.taskMinutes*1e3),"00:00:00"==this.lab_time.text&&(console.log("stop"),this.timer.stop(),this.isHttp||(this.isHttp=!0,egret.setTimeout(function(){this.getResult()},this,1500)))},e.prototype.getResult=function(){var t=this;FachUtils.Get2("/tug/eventStatus",function(e){e.status&&2==e.resource.joinStatus&&t.playTw(e.resource)},function(t){})},e.prototype.playTw=function(t){switch(t.tuggingRecords.winner){case 0:this.item.PlayAni1();break;case 1:this.item.PlayAni4();break;case 2:this.item.PlayAni2()}var e=new BaHe_Result;e.setDate(t),egret.setTimeout(function(){Director.getInstance().pushSceneScal(e),Director.getInstance().removeSceneNoTw(this)},this,500)},e.prototype.Remove=function(){this.timer.stop()},e.prototype.setDate=function(t){this.data=t},e.prototype.init=function(){for(var t=0;t<this.data.tuggingRecords.myInvite;t++){var e=new eui.Image;e.source="icon1_png",this.group_me.addChild(e)}for(var t=0;t<this.data.tuggingRecords.aiInvite;t++){var e=new eui.Image;e.source="icon1_png",this.group_other.addChild(e)}this.lab_time.text=DataUtils.DaoJiShi(this.data.tuggingRecords.createTime+60*this.data.tugSetting.taskMinutes*1e3),this.timer.start();var i=this.data.tuggingRecords.myStrength+this.data.tuggingRecords.aiStrength;this.lab_jindu_my.text=this.data.tuggingRecords.myStrength,this.img_jindu_my.width=this.data.tuggingRecords.myStrength/i*250,this.lab_jindu_other.text=this.data.tuggingRecords.aiStrength,this.img_jindu_other.width=this.data.tuggingRecords.aiStrength/i*250},e.prototype.YaoQing=function(){Director.getInstance().pushScene(new FengXIang_BaHe)},e.prototype.Close=function(){Director.getInstance().removeSceneNoTw(this)},e}(eui.Component);__reflect(BaHe.prototype,"BaHe");var FengXIang_BaHe=function(t){function e(){var e=t.call(this)||this;return e.skinName="fenxiang_tidu",e}return __extends(e,t),e.prototype.createChildren=function(){var t=new egret.Shape,e=egret.GradientType.LINEAR,i=[13890554,16777215],a=[1,1],s=[255,0],n=new egret.Matrix;n.createGradientBox(375,667,30,375,667),t.graphics.beginGradientFill(e,i,a,s,n),t.graphics.drawRect(0,0,750,1334),this.addChildAt(t,0),this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.img_fenxiang.addEventListener(egret.TouchEvent.TOUCH_TAP,this.FenXiang,this),this.getJinDu(),this.getFenXiangCanShu(),this.lab_title.text="邀请更多好友  助力红包争夺赛",this.lab_note.text="邀请好友越多，获胜几率越大",this.img.source="fenxiang_bahe_png"},e.prototype.getFenXiangCanShu=function(){},e.prototype.getJinDu=function(){},e.prototype.FenXiang=function(){},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e.prototype.JSCallbackFunctionName=function(){PopoP.getTips("分享成功")},e}(eui.Component);__reflect(FengXIang_BaHe.prototype,"FengXIang_BaHe");var CangKu_Item=function(t){function e(){var e=t.call(this)||this;return e.skinName="beibao_item1",e}return __extends(e,t),e.prototype.createChildren=function(){console.log(this.currentState),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Touch,this)},e.prototype.Touch=function(){null!=this.data&&Director.getInstance().gameLayer.addChild(new CangKu_XiangQing(this.data))},e.prototype.dataChanged=function(){null!=this.data&&(this.lab_name.text=this.data.name,this.img.source=Fach.host+this.data.img,this.lab_num.text="x "+DataUtils.floot(this.data.count),this.img.maxHeight=this.group.width,this.img.maxWidth=this.group.height,1==this.data.type?this.img_bg.visible=!0:2==this.data.type&&(this.img_bg.visible=!1))},e}(eui.ItemRenderer);__reflect(CangKu_Item.prototype,"CangKu_Item");var CangKu_XiangQing=function(t){function e(e){var i=t.call(this)||this;return i.data=e,i.skinName="beibao_xiangqing",i}return __extends(e,t),e.prototype.createChildren=function(){this.btn_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Yes,this),this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.rec_sell.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchSell,this),this.img.source=Fach.host+this.data.img,this.lab_name.text=this.data.name,this.lab_yongtu.text=this.data.use,this.lab_xq.text=this.data.des,this.lab_gold.text="+"+DataUtils.mul(this.data.soldPrice,this.data.count)+"金币",1==this.data.type?this.btn_yes.visible=!1:this.btn_yes.visible=!0,this.img.maxHeight=this.group.height,this.img.maxWidth=this.group.width},e.prototype.Size=function(){if(this.img.width>this.group.width){var t=this.group.width/this.img.width;this.img.height=this.img.height*t,this.img.width=this.img.width*t}if(this.img.height>this.group.height){var e=this.group.height/this.img.height;this.img.height=this.img.height*e,this.img.width=this.img.width*e}},e.prototype.Yes=function(){return this.data.sendStrCount>this.data.count?void PopoP.getTips("最低快递数量为"+this.data.sendStrCount+"个"):(this.Close(),void Director.getInstance().pushScene(new KuaiDi(this.data)))},e.prototype.Close=function(){SoundsMgr.clickCell(),this.parent.removeChild(this)},e.prototype.TouchSell=function(){var t=(new CallBackFunc).handler(this.Sell,this,[]);Director.getInstance().gameLayer.addChild(new TiShi("是否确认出售"+this.data.name,t)),this.parent.removeChild(this)},e.prototype.Sell=function(){FachUtils.Get("/warahouse/sell/"+this.data._id,function(t){if(t.status){var e=Director.getInstance().gameLayer.getChildByName("cangku");e.init(),PopoP.getTips(t.message),Director.getInstance().getUser()}else PopoP.getTips(t.message)},function(t){PopoP.getTips(t.message)})},e}(eui.Component);__reflect(CangKu_XiangQing.prototype,"CangKu_XiangQing");var CangKu=function(t){function e(){var e=t.call(this)||this;return e.wupin=[],e.daoju=[],e.skinName="beibao",e.name="cangku",e}return __extends(e,t),e.prototype.createChildren=function(){this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.init()},e.prototype.init=function(){var t=this;t.daoju=[],t.wupin=[],FachUtils.Get("/user/warahouse",function(e){if(e.status){for(var i=0;i<e.resource.length;i++)1==e.resource[i].type?t.daoju.push(e.resource[i]):2==e.resource[i].type&&t.wupin.push(e.resource[i]);t.daoju.length<15?t.daoju.length=15:t.daoju.length=5*Math.ceil(t.daoju.length/5),t.wupin.length<10?t.wupin.length=10:t.wupin.length=5*Math.ceil(t.wupin.length/5),t.list_beibao.dataProvider=new eui.ArrayCollection(t.daoju),t.list_beibao.currentState="daoju",t.list_beibao.itemRenderer=CangKu_Item,t.list_beibao.itemRenderer.currentState="daoju",t.group_beibao.validateNow(),t.list_wupin.dataProvider=new eui.ArrayCollection(t.wupin),t.list_wupin.currentState="wupin",t.list_wupin.itemRenderer=CangKu_Item,t.list_wupin.itemRenderer.currentState="wupin",t.group_wupin.validateNow();for(var i=0;i<t.list_beibao.numChildren;i++)t.list_beibao.$children[i].currentState="daoju";for(var i=0;i<t.list_wupin.numChildren;i++)t.list_wupin.$children[i].currentState="wupin"}else PopoP.getTips(e.message)},function(t){PopoP.getTips(t.message)}),new eui.Button,this.list_wupin.itemRendererFunction},e.prototype.Close=function(){SoundsMgr.clickCell(),this.parent.removeChild(this)},e}(eui.Component);__reflect(CangKu.prototype,"CangKu");var ChongWu=function(t){function e(){var e=t.call(this)||this;return e.num=0,e.skinName="chongwu",e}return __extends(e,t),e.prototype.createChildren=function(){this.lab_close.addEventListener("touchTap",this.Close,this),this.btn_yes.addEventListener("touchTap",this.ShengJi,this),this.btn_weiyang.addEventListener("touchTap",this.WeiYang,this),this.rec_chongwu.addEventListener("touchTap",this.ChongWu,this),this.addEventListener(GameEvent.getUserInfo,this.initDate,this),this.init(),this.initDate()},e.prototype.init=function(){var t=new DogDragon("");this.item=t,this.item.horizontalCenter=0,t.x=300,t.y=400,this.addChild(t),t.PlayAni1()},e.prototype.initDate=function(){var t=this;FachUtils.Get("/pet/dog",function(e){if(e.status){t.lab_qizhi.text=DataUtils.floot(e.resource.vitality),t.lab_shanghai.text=DataUtils.floot(e.resource.baseDamage),t.lab_baojilv.text=DataUtils.mul(100,e.resource.crit_rate)+"%",t.lab_shengming.text=DataUtils.floot(e.resource.hp),t.lab_baofugan.text=DataUtils.floot(e.resource.bsd),e.resource.bsd<30&&t.item.PlayAni2(),t.lab_baoji.text=DataUtils.floot(e.resource.baseDamage),t.lab_lv.text="LV."+e.resource["class"],t.rec_lv.width=500*(e.resource.feedCount/e.resource.nexClass_needFeed>1?1:e.resource.feedCount/e.resource.nexClass_needFeed),t.lab_gold.text=e.resource.feedGold,t.lab_zhandouli.text="(战斗力 "+DataUtils.mul(e.resource.damageRate,100)+"%)",e.resource.feedCount==e.resource.nexClass_needFeed?(t.btn_yes.visible=!0,t.btn_weiyang.visible=!1,t.lab_gold.text=e.resource.upGradeGold):(t.btn_yes.visible=!1,t.btn_weiyang.visible=!0);for(var i,a=0;a<e.resource.spendProps.length;a++)0==a?t.group1.visible=!0:1==a?t.group2.visible=!0:2==a&&(t.group3.visible=!0),i=e.resource.spendProps[a].hasCount<e.resource.spendProps[a].needCount?"<font color=0xEA1F1F>"+e.resource.spendProps[a].hasCount+"</font><font color=0x333333> / "+e.resource.spendProps[a].needCount+"</font>":"<font color=0x1BA81F>"+e.resource.spendProps[a].hasCount+"</font><font color=0x1BA81F> / "+e.resource.spendProps[a].needCount+"</font>",t.lab_num1.textFlow=(new egret.HtmlTextParser).parser(i),t.img_shiwu1.source=Fach.host+e.resource.spendProps[a].img}else PopoP.getTips(e.message)},function(t){PopoP.getTips(t.message)})},e.prototype.ChongWu=function(){switch(this.num++,this.num=this.num%3,this.num){case 0:this.item.PlayAni1();break;case 1:this.item.PlayAni4();break;case 2:this.item.PlayAni5()}},e.prototype.WeiYang=function(){var t=this;FachUtils.Get("/pet/feed",function(e){e.status?(Director.getInstance().getUser(),t.item.PlayAni5(),PopoP.getTips(e.message)):PopoP.getTips(e.message)},function(t){PopoP.getTips(t.message)})},e.prototype.ShengJi=function(){var t=this;FachUtils.Get("/pet/upgrade",function(e){e.status?(Director.getInstance().getUser(),t.item.PlayAni3(),PopoP.getTips(e.message)):PopoP.getTips(e.message)},function(t){PopoP.getTips(t.message)})},e.prototype.Close=function(){Director.getInstance().removeSceneNoTw(this)},e}(eui.Component);__reflect(ChongWu.prototype,"ChongWu");var DateTimer=function(t){function e(e,i){void 0===i&&(i=0);var a=t.call(this)||this;return a.delay=e,a.repeatCount=i,a}return __extends(e,t),e.prototype.start=function(){this.previous=egret.getTimer(),this.accTime=0,egret.startTick(this.update,this)},e.prototype.reset=function(){this.previous=egret.getTimer(),this.accTime=0,this.currentCount=0},e.prototype.stop=function(){egret.stopTick(this.update,this)},e.prototype.update=function(){for(this.curTime=egret.getTimer(),this.passTime=this.curTime-this.previous,this.previous=this.curTime,this.accTime+=this.passTime;this.accTime>=this.delay;)this.accTime-=this.delay,this.currentCount++,this.repeatCount>0&&this.currentCount==this.repeatCount&&(this.dispatchEvent(new egret.TimerEvent(egret.TimerEvent.TIMER_COMPLETE)),this.stop()),this.dispatchEvent(new egret.TimerEvent(egret.TimerEvent.TIMER));return!1},e}(egret.EventDispatcher);__reflect(DateTimer.prototype,"DateTimer");var Animal_XiangQing=function(t){function e(e,i){var a=t.call(this)||this;return a.data=e,a.type=i,a.skinName="seed_xiangQing",a}return __extends(e,t),e.prototype.createChildren=function(){this.img_close.addEventListener("touchTap",this.Close,this),this.img_jiesuo.addEventListener("touchTap",this.JieSuo,this),this.img_hecheng.addEventListener("touchTap",this.HeCheng,this),this.setType(),this.init()},e.prototype.setType=function(){switch(this.type){case 1:this.lab_seedName.strokeColor=14191165,this.img_bg.source="seed_xiangqing_un_png",this.img_suo.visible=!0,this.img_jiesuo.visible=!0,this.group_btn.visible=!0;break;case 2:this.img_bg.source="seed_xiangqing_png",this.img_suo.visible=!1,this.img_jiesuo.visible=!1,this.group_btn.visible=!1,this.img_hecheng.visible=!1}},e.prototype.init=function(){var t=this;FachUtils.Get("/animal/userDetail/"+this.data._id,function(e){e.status?t.initDate(e.resource.plant):PopoP.getTips(e.message)},function(t){PopoP.getTips(t.message)})},e.prototype.initDate=function(t){if(this.img.source=Fach.host+t.img1,this.lab_seedName.text=t.name,this.lab_gold.text=DataUtils.floot(t.maxGold),this.lab_hongbao.text=DataUtils.floot(t.firHb),this.lab_nengliang.text=DataUtils.floot(t.maxEssence),this.lab_clock.text="("+t.hasUnlockTime+"/"+t.unlockTime+")",this.lab_needGold.text=DataUtils.floot(t.everyPrice),null!=t.props)if(0==t.props)this.img_wu.visible=!0;else{this.img_wu.visible=!1;var e=this;e.list.dataProvider=new eui.ArrayCollection(t.props),e.list.itemRenderer=Seed_ChanChu_Item}else this.img_wu.visible=!0;switch(t.hasUnlockTime==t.unlockTime&&(this.group_btn.visible=!1,this.img_jiesuo.visible=!1,this.img_hecheng.visible=!0),t.qualityId){case 0:this.lab_pinzhi.text="奇迹品质";break;case 1:this.lab_pinzhi.text="普通品质";break;case 2:this.lab_pinzhi.text="高级品质";break;case 3:this.lab_pinzhi.text="稀有品质";break;case 4:this.lab_pinzhi.text="超凡品质";break;case 5:this.lab_pinzhi.text="史诗品质";break;case 6:this.lab_pinzhi.text="传奇品质"}},e.prototype.JieSuo=function(){var t=this;FachUtils.Get("/animal/unlock/"+this.data._id,function(e){e.status?(Director.getInstance().getUser(),t.JieSuoChengGong(e.resource.plant)):PopoP.getTips(e.message)},function(t){PopoP.getTips(t.message)})},e.prototype.JieSuoChengGong=function(t){this.img.source=Fach.host+t.img,this.lab_seedName.text=t.name,this.lab_gold.text=DataUtils.floot(t.maxGold),this.lab_hongbao.text=DataUtils.floot(t.firHb),this.lab_nengliang.text=DataUtils.floot(t.maxEssence),this.lab_clock.text="("+t.hasUnlockTime+"/"+t.unlockTime+")",this.lab_needGold.text=DataUtils.floot(t.everyPrice),t.hasUnlockTime==t.unlockTime&&(this.group_btn.visible=!1,this.img_jiesuo.visible=!1,this.img_hecheng.visible=!0)},e.prototype.HeCheng=function(){var t=this;FachUtils.Get("/animal/cb/"+this.data._id,function(e){e.status?(t.type=2,t.setType(),PopoP.getTips(e.message)):PopoP.getTips(e.message)},function(t){PopoP.getTips(t.message)})},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e}(eui.Component);__reflect(Animal_XiangQing.prototype,"Animal_XiangQing");var AnimalBean=function(t){function e(e){var i=t.call(this)||this;return i.isChengShu=!1,i.skinName="tudiBean",i.tudi=e,i.tudi.addEventListener(egret.TouchEvent.TOUCH_TAP,i.Touch,i),i.img_shouhuo.addEventListener(egret.TouchEvent.TOUCH_TAP,i.ShouHuo,i),i.img_yijian.addEventListener(egret.TouchEvent.TOUCH_TAP,i.yiJianShouHuo,i),i}return __extends(e,t),e.prototype.createChildren=function(){this.game=Director.getInstance().gameLayer.getChildByName("game"),this.timer=new DateTimer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,this.Timer,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.Removed,this),this.gif=new AnimalDragon,this.gif.name="animal",this.gif.horizontalCenter=0,this.gif.bottom=10,this.group_1.addChildAt(this.gif,0),this.group_1.scaleX=.7,this.group_1.scaleY=.7;var t=new egret.Shape;t.graphics.beginFill(0),t.graphics.drawRect(0,0,this.group.width,this.group.height),t.graphics.endFill(),t.x=this.group.x,t.y=this.group.y,this.addChild(t),this.group.mask=t},e.prototype.Timer=function(){this.lab_daojishi.text=DataUtils.DaoJiShi(this.data.harvestTime),this.data.harvestTime<(new Date).getTime()-Director.getInstance().ShiJianCha&&(this.removeEventListener(egret.Event.ENTER_FRAME,this.Frame,this),this.timer.stop(),this.data.status=3,this.isChengShu||(this.init(),this.game.AnimalYJSH()))},e.prototype.Touch=function(t){if(t.stopPropagation(),0==this.data.status){var e="";switch(this.lockDate.cdtTpye){case 1:e="此土地将于"+this.lockDate.personClass+"级解锁",PopoP.getTips(e);break;case 2:e="邀请"+this.lockDate.inviteCount+"个好友解锁土地",Director.getInstance().pushScene(new FenXiang_Animal(this.data._id,this.lockDate.inviteCount));break;case 3:e="花费"+this.lockDate.dimond+"颗钻石解锁土地";var i=new VipJieSuo,a={_id:this.data._id,price:this.lockDate.dimond,type:2};i.setDate(a),Director.getInstance().pushScene(i)}}else if(1==this.data.status){var s=Director.getInstance().gameLayer.getChildByName("game");s.animal_selected_pond=this.data.code,s.addSelectAnimal()}},e.prototype.setDate=function(t){this.data=t,console.log(this.data),this.init()},e.prototype.setLockDate=function(t){this.lockDate=t},e.prototype.init=function(){if(this.harvestDate=null,this.img_shouhuo.visible=!1,0==this.data.status)this.removeEventListener(egret.Event.ENTER_FRAME,this.Frame,this),this.removeImg(),this.tudi.source="tudianimal1_png";else if(1==this.data.status)this.removeEventListener(egret.Event.ENTER_FRAME,this.Frame,this),this.removeImg(),this.tudi.source="tudianimal0_png",this.tudi.touchEnabled=!0;else if(2==this.data.status){this.tudi.touchEnabled=!1,this.group.visible=!0,this.x=this.tudi.x+this.tudi.width/2-this.width/2,this.y=this.tudi.y+this.tudi.height-this.height-20,this.tudi.parent.addChildAt(this,this.tudi.parent.getChildIndex(this.tudi)+12);this.data.plantTime;this.lab_daojishi.text=DataUtils.DaoJiShi(this.data.harvestTime);var t="";switch(this.data.animationId){case 1e3:t="nainiu",this.gif.scaleX=1.1,this.gif.scaleY=1.1;break;case 1001:t="xiaoyang",this.gif.scaleX=1.1,this.gif.scaleY=1.1;break;case 1002:t="check2",this.gif.scaleX=1.6,this.gif.scaleY=1.6;break;case 1003:t="农场-小鸭",this.gif.scaleX=1.6,this.gif.scaleY=1.6;break;case 1004:t="白灰兔子小",this.gif.scaleX=1.3,this.gif.scaleY=1.3;break;case 1005:t="pig2",this.gif.scaleX=1.1,this.gif.scaleY=1.1}this.gif.setDate(t),this.addEventListener(egret.Event.ENTER_FRAME,this.Frame,this),this.timer.start(),this.isChengShu=!1}else if(3==this.data.status){this.isChengShu=!0,this.tudi.touchEnabled=!1,this.x=this.tudi.x+this.tudi.width/2-this.width/2,this.y=this.tudi.y+this.tudi.height-this.height-20,this.tudi.parent.addChildAt(this,this.tudi.parent.getChildIndex(this.tudi)+12);this.data.plantTime;this.lab_daojishi.text=DataUtils.DaoJiShi(this.data.harvestTime);var t="";switch(this.data.pltId){case 1e3:t="奶牛",this.gif.scaleX=.8,this.gif.scaleY=.8;break;case 1001:t="山羊",this.gif.scaleX=.9,this.gif.scaleY=.9;break;case 1002:t="百花母鸡",this.gif.scaleX=1.1,this.gif.scaleY=1.1;break;case 1003:t="大白鸭",this.gif.scaleX=1.1,this.gif.scaleY=1.1;break;case 1004:t="白灰兔子",this.gif.scaleX=1.3,this.gif.scaleY=1.3;break;case 1005:t="pig",this.gif.scaleX=.8,this.gif.scaleY=.8}this.gif.setDate(t);var e=this;e.img_shouhuo.visible=!0,this.group.visible=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.Frame,this);var i=this.game.canShouHUoAnimal.indexOf(this.data);-1==i&&this.game.canShouHUoAnimal.push(this.data)}},e.prototype.Frame=function(){this.img_daojishi.width=((new Date).getTime()-Director.getInstance().ShiJianCha-this.data.plantTime)/(this.data.harvestTime-this.data.plantTime)*200},e.prototype.ShouHuo=function(){Director.getInstance().pushSceneNoTw(new Tw_ShouHuo(this.data,this.img_shouhuo,2))},e.prototype.yiJianShouHuo=function(){for(var t=Director.getInstance().gameLayer.getChildByName("game"),e=[],i=0;i<t.canShouHUoAnimal.length;i++)e.push(t.canShouHUoAnimal[i]);Director.getInstance().pushSceneNoTw(new Tw_YiJianShouHuo(e,this.img_yijian,2))},e.prototype.removeImg=function(){var t=this.group_1.getChildByName("animal");null!=t&&this.gif.setDate("")},e.prototype.Removed=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.Frame,this)},e}(eui.Component);__reflect(AnimalBean.prototype,"AnimalBean");var FenXiang_Animal=function(t){function e(e,i){var a=t.call(this)||this;return a._id=e,a.lockSum=i,a.skinName="fenxiang_tidu",a}return __extends(e,t),e.prototype.createChildren=function(){var t=new egret.Shape,e=egret.GradientType.LINEAR,i=[13890554,16777215],a=[1,1],s=[255,0],n=new egret.Matrix;n.createGradientBox(375,667,30,375,667),t.graphics.beginGradientFill(e,i,a,s,n),t.graphics.drawRect(0,0,750,1334),this.addChildAt(t,0),this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.initView(),this.getJinDu(),this.getFenXiangCanShu()},e.prototype.initView=function(){this.img.source="fenxiang_animal_png"},e.prototype.getFenXiangCanShu=function(){var t=this,e={id:1e3};FachUtils.Post("/plant/land/share/settings",e,function(e){e.status&&(t.fenXiangdata=e.resource)},function(t){})},e.prototype.getJinDu=function(){var t=this;FachUtils.Get("/plant/land/share/"+this._id,function(e){e.status&&(t.lab_jindu.text=e.resource.inviteCount+"/"+t.lockSum)},function(t){})},e.prototype.FenXiang=function(){switch(egret.Capabilities.os){case"iOS":console.log("iOS"),JMMALL.postMessage({method:"shareLink",title:this.fenXiangdata.title,thumb:Fach.host+this.fenXiangdata.thumb,description:this.fenXiangdata.description,scene:"game01",webUrl:this.fenXiangdata.webUrl,cb:"JSCallbackFunctionName"});break;case"Android":console.log("Android");var t={title:this.fenXiangdata.title,thumb:Fach.host+this.fenXiangdata.thumb,description:this.fenXiangdata.description,scene:"game01",webUrl:this.fenXiangdata.webUrl,cb:"JSCallbackFunctionName"};JSON.stringify(t);JMMALL.shareLink({title:"标题内容",thumb:Fach.host+this.fenXiangdata.thumb,description:this.fenXiangdata.description,scene:"game01",webUrl:this.fenXiangdata.webUrl,cb:"JSCallbackFunctionName"});break;default:PopoP.getTips("未识别手机系统")}},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e.prototype.JSCallbackFunctionName=function(){PopoP.getTips("分享成功")},e}(eui.Component);__reflect(FenXiang_Animal.prototype,"FenXiang_Animal");var FenXiang_TuDi=function(t){function e(e,i){var a=t.call(this)||this;return a._id=e,a.lockSum=i,a.skinName="fenxiang_tidu",a}return __extends(e,t),e.prototype.createChildren=function(){var t=new egret.Shape,e=egret.GradientType.LINEAR,i=[13890554,16777215],a=[1,1],s=[255,0],n=new egret.Matrix;n.createGradientBox(375,667,30,375,667),t.graphics.beginGradientFill(e,i,a,s,n),t.graphics.drawRect(0,0,750,1334),this.addChildAt(t,0),this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.img_fenxiang.addEventListener(egret.TouchEvent.TOUCH_TAP,this.FenXiang,this),this.getJinDu(),this.getFenXiangCanShu()},e.prototype.getFenXiangCanShu=function(){var t=this,e={id:1e3};FachUtils.Post("/plant/land/share/settings",e,function(e){e.status&&(t.fenXiangdata=e.resource)},function(t){})},e.prototype.getJinDu=function(){var t=this;FachUtils.Get("/plant/land/share/"+this._id,function(e){e.status&&(t.lab_jindu.text=e.resource.inviteCount+"/"+t.lockSum)},function(t){})},e.prototype.FenXiang=function(){switch(egret.Capabilities.os){case"iOS":console.log("iOS"),JMMALL.postMessage({method:"shareLink",title:this.fenXiangdata.title,thumb:Fach.host+this.fenXiangdata.thumb,description:this.fenXiangdata.description,scene:"game01",webUrl:this.fenXiangdata.webUrl,cb:"JSCallbackFunctionName"});break;case"Android":console.log("Android");var t={title:this.fenXiangdata.title,thumb:Fach.host+this.fenXiangdata.thumb,description:this.fenXiangdata.description,scene:"game01",webUrl:this.fenXiangdata.webUrl,cb:"JSCallbackFunctionName"};JSON.stringify(t);JMMALL.shareLink({title:"标题内容",thumb:Fach.host+this.fenXiangdata.thumb,description:this.fenXiangdata.description,scene:"game01",webUrl:this.fenXiangdata.webUrl,cb:"JSCallbackFunctionName"});break;default:PopoP.getTips("未识别手机系统")}},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e.prototype.JSCallbackFunctionName=function(){PopoP.getTips("分享成功")},e}(eui.Component);__reflect(FenXiang_TuDi.prototype,"FenXiang_TuDi");var Game_GenBan_ShouYi=function(t){function e(){var e=t.call(this)||this;return e.skinName="game_genban_shouyi",e}return __extends(e,t),e.prototype.createChildren=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Touch,this)},e.prototype.setDate=function(t){this.data=t,this.group.removeChildren();for(var e=0;e<t.props.length;e++){var i=new eui.Image;i.width=45,i.height=45,"金币"==t.props[e].name||"经验"==t.props[e].name?i.source=t.props[e].img:i.source=Fach.host+t.props[e].img,this.group.addChild(i)}},e.prototype.Touch=function(){var t=new ChanChu;t.setDate(this.data),Director.getInstance().pushScene(t)},e}(eui.Component);__reflect(Game_GenBan_ShouYi.prototype,"Game_GenBan_ShouYi");var Game_GenBan=function(t){function e(){var e=t.call(this)||this;return e.skinName="game_genban",e}return __extends(e,t),e.prototype.createChildren=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Touch,this)},e.prototype.Touch=function(){switch(this.type){case 0:var t=new GenBan;t.setDate(this.data),Director.getInstance().pushSceneNoTw(t);break;case 1:if(3==this.data.slaveStatus){var e=new QiangDao;e.setDate(this.data),Director.getInstance().pushScene(e)}else{var i=new ChanChu;i.setDate(this.data),Director.getInstance().pushScene(i)}}},e.prototype.setDate=function(t,e){switch(this.type=1,this.rec=e,this.data=t,this.group_ren.visible=!0,this.lab.text="",this.img.visible=!1,null!=t.slave.avatar&&""!=t.slave.avatar?this.img_icon.source=t.slave.avatar:this.img_icon.source="icon1_png",this.lab_name.text=t.slave.nickname,t.work_id){case 1e3:this.lab_note.text="正在帮您养蜂";break;case 1001:this.lab_note.text="正在帮您捕鱼";break;case 1002:this.lab_note.text="正在给您深海打捞";break;case 1003:this.lab_note.text="正在给您挖矿";break;case 1004:this.lab_note.text="正在给您丛林探险"}2==t.slaveStatus?this.lab_note.text="您的跟班已经累瘫了~":3==t.slaveStatus&&(this.lab_note.text="您的跟班被"+this.data.other.nickname+"抢走了")},e.prototype.setDate2=function(t,e){switch(this.data=t,this.type=0,this.rec=e,this.group_ren.visible=!1,this.img.visible=!0,this.lab.text="",t.work_id){case 1e3:this.lab.text="抓个跟班帮您养蜂";break;case 1001:this.lab.text="抓个跟班帮您捕鱼";break;case 1002:this.lab.text="抓个跟班给您深海打捞";break;case 1003:this.lab.text="抓个跟班给您挖矿";break;case 1004:this.lab.text="抓个跟班给您丛林探险"}},e}(eui.Component);__reflect(Game_GenBan.prototype,"Game_GenBan");var Game=function(t){function e(){var e=t.call(this)||this;return e.tudi_selected_pond=0,e.animal_selected_pond=0,e.canShouHUoSeed=[],e.canShouHUoAnimal=[],e.tudis=[],e.TuDiBeans=[],e.animaltudis=[],e.animalBeans=[],e.tudinum=0,e.willFinish=!1,e.skinName="game",RES.loadGroup("sound"),e.name="game",e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.Touch,e),e.addEventListener(GameEvent.getUserInfo,e.initUser,e),e.addEventListener(egret.TouchEvent.TOUCH_END,e.CloseAll,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.Remove,e),e.vip_tudi.addEventListener(egret.TouchEvent.TOUCH_TAP,e.VipTuDi,e),e.vip_animal.addEventListener(egret.TouchEvent.TOUCH_TAP,e.VipAnimal,e),e}return __extends(e,t),e.prototype.createChildren=function(){this.initView(),Director.getInstance().getUser(!0);egret.setTimeout(this.GunPing,this,5e3),egret.setTimeout(this.isZaiXian,this,3e4),this.initDog()},e.prototype.initDog=function(){var t=new DogDragon("");t.x=this.img_dog.x+30,t.y=this.img_dog.y+38,t.scaleX=.2,t.scaleY=.2,this.img_dog.alpha=0,t.PlayAni1(),this.group_game.addChild(t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Director.getInstance().pushSceneNoTw(new ChongWu)},this)},e.prototype.initView=function(){for(var t=this.group_game.getChildIndex(this.tudi1),e=0;12>e;e++){this.tudis.push(this.group_game.getChildAt(t-e));var i=new TuDiBean(this.group_game.getChildAt(t-e));this.TuDiBeans.push(i)}for(var a=this.group_game.getChildIndex(this.animal1),e=0;12>e;e++){this.animaltudis.push(this.group_game.getChildAt(a+e));var s=new AnimalBean(this.group_game.getChildAt(a+e));this.animalBeans.push(s)}SoundsMgr.playBg(),SoundsMgr.IsSound()?this.music.source="music1_png":this.music.source="music2_png"},e.prototype.Touch=function(t){switch(this.tudi_selected.visible=!1,this.remoSelectSeed(),this.remoSelecAnimal(),console.log(this.group_game.scrollH+"~~~~~~"+this.group_game.scrollV),t.target){case this.img_beibao:case this.lab_beibao:this.rec_beibao.visible=!1,TWUtils.TwCanTouch(this.img_beibao),Director.getInstance().gameLayer.addChild(new CangKu);
break;case this.rec_jiaGongChang:TWUtils.TwCanTouch(this.rec_jiaGongChang),Director.getInstance().pushScene(new JiaGong);break;case this.img_seed:TWUtils.TwCanTouch(this.img_seed),this.addSelectSeed();break;case this.img_animal:TWUtils.TwCanTouch(this.img_animal),this.addSelectAnimal();break;case this.img_zhuanpan:Director.getInstance().pushSceneNoTw(new ZhuanPan);break;case this.img_haoyou:Director.getInstance().pushScene(new HaoYou);break;case this.img_addZuanShi:Director.getInstance().pushScene(new ChongZhi);break;case this.rec_jiaGongChang:TWUtils.TwCanTouch(this.rec_jiaGongChang),Director.getInstance().pushScene(new JiaGong);break;case this.music:SoundsMgr.setIsSound(!SoundsMgr.IsSound()),SoundsMgr.IsSound()?(SoundsMgr.PlayBGM(),this.music.source="music1_png"):(this.music.source="music2_png",SoundsMgr.StopBGM());break;case this.img_tixian:Director.getInstance().pushSceneNoTw(new TiXian);break;case this.rec_yangFengChang:this.suo_fengchang.visible?PopoP.getTips("等级不足,暂未开放"):this.FengChang(this.yangfengdata);break;case this.rec_shenHaiDaLao:this.suo_shenhaidalao.visible?PopoP.getTips("等级不足,暂未开放"):this.FengChang(this.dalaodata);break;case this.img_hongbao:this.openHongBao();break;case this.img_yaoqianshu:var e=new YaoQianShu;Director.getInstance().pushSceneNoTw(e),e.setType(1);break;case this.img_yqs_menu:var i=new YaoQianShu;Director.getInstance().pushSceneNoTw(i),i.setType(2);break;case this.rec_congLinTanXian:this.suo_conglintanxian.visible?PopoP.getTips("等级不足,暂未开放"):this.FengChang(this.conglindata);break;case this.rec_waKuang:this.suo_shenshanwakuang.visible?PopoP.getTips("等级不足,暂未开放"):this.FengChang(this.wakuangdata);break;case this.rec_buYuMaTou:this.suo_buyumatou.visible?PopoP.getTips("等级不足,暂未开放"):this.FengChang(this.buyudata);break;case this.img_icon:Director.getInstance().pushSceneHeng(new GeRen);break;case this.img_dog:Director.getInstance().pushSceneHeng(new ChongWu);break;case this.lab_paihang:case this.img_paihang:Director.getInstance().pushSceneNoTw(new PaiHang);break;case this.img_addGold:Director.getInstance().pushSceneNoTw(new GetMoney);break;case this.img_guajia:this.user.guanjiaTime&&this.user.guanjiaTime>=(new Date).getTime()-Director.getInstance().ShiJianCha?Director.getInstance().pushScene(new GuanJia2):Director.getInstance().pushScene(new GuanJia_XiangQing)}},e.prototype.initUser=function(){this.user=JSON.parse(egret.localStorage.getItem("user")),this.lab_gold.text=DataUtils.floot(this.user.gold),this.lab_hongbao.text=DataUtils.floot(this.user.hb),this.lab_nengLiang.text=DataUtils.floot(this.user.plt_sessence),null!=this.user.avatar&&""!=this.user.avatar&&(this.img_icon.source=this.user.avatar),this.lab_zuanshi.text=DataUtils.floot(this.user.dimond),this.rec_tili.width=this.user.power/100*90,this.lab_lv.text=this.user["class"],"普通会员"==this.user.appLevel.levelName?this.img_lv.source="chenghao0_png":"白银店主"==this.user.appLevel.levelName?this.img_lv.source="chenghao1_png":"黄金店主"==this.user.appLevel.levelName?this.img_lv.source="chenghao2_png":"销售经理"==this.user.appLevel.levelName?this.img_lv.source="chenghao4_png":this.img_lv.source="";var t=DataUtils.sub(this.user.nextExe,this.user.needExe),e=DataUtils.div(this.user.experience-t,this.user.needExe);this.user.experience>=this.user.nextExe?this.img_needUp.visible=!0:this.img_needUp.visible=!1,-1==this.user.needExe&&(this.img_needUp.visible=!1),0>=e?e=0:e>=1&&(e=1),this.user.needExe<=0&&(e=1),this.rec_jingyan.width=90*e,this.user.guanjiaTime&&this.user.guanjiaTime>=(new Date).getTime()-Director.getInstance().ShiJianCha,this.BaHeKaiQi(),this.getTouQUinFo(),this.tellBackStage(),this.checkJianZhu(),this.GetHaoYou(),this.LiXianJiang()},e.prototype.isZaiXian=function(){var t=this;FachUtils.Get2("/user/online",function(e){e.status&&(t.willFinish||egret.setTimeout(t.isZaiXian,t,3e5))},function(t){})},e.prototype.LiXianJiang=function(){var t=this;FachUtils.Get2("/hb/offLineRewards",function(e){if(e.status){var i=e.resource.dimond+e.resource.experience+e.resource.gold+e.resource.hb+e.resource.plt_sessence+e.resource.tl;0==e.resource.props.length&&0==i?t.img_yqs_menu.visible=!1:t.img_yqs_menu.visible=!0}},function(t){})},e.prototype.checkJianZhu=function(){var t=this;FachUtils.Get("/cathSlave/workStatus",function(e){e.status&&t.setGenBan(e.resource)},function(t){})},e.prototype.setGenBan=function(t){for(var e,i,a=0;a<t.length;a++){switch(t[a].work_id){case 1e3:this.user["class"]>=t[a].unlockClass?(this.suo_fengchang.visible=!1,e=this.img_yangfeng,i=this.rec_yangFengChang,this.yangfengdata=t[a]):this.suo_fengchang.visible=!0;break;case 1001:this.user["class"]>=t[a].unlockClass?(this.suo_buyumatou.visible=!1,e=this.img_buyu,i=this.rec_buYuMaTou,this.buyudata=t[a]):this.suo_buyumatou.visible=!0;break;case 1002:this.user["class"]>=t[a].unlockClass?(this.suo_shenhaidalao.visible=!1,e=this.img_dalao,i=this.rec_shenHaiDaLao,this.dalaodata=t[a]):this.suo_shenhaidalao.visible=!0;break;case 1003:this.user["class"]>=t[a].unlockClass?(this.suo_shenshanwakuang.visible=!1,e=this.img_wakuang,i=this.rec_waKuang,this.wakuangdata=t[a]):this.suo_shenshanwakuang.visible=!0;break;case 1004:this.user["class"]>=t[a].unlockClass?(this.suo_conglintanxian.visible=!1,e=this.img_conglin,i=this.rec_congLinTanXian,this.conglindata=t[a]):this.suo_conglintanxian.visible=!0}if(!(this.user["class"]<t[a].unlockClass)){console.log(t[a].work_id);var s=this.group_game.getChildByName(t[a].work_id+"genban");if(null==s&&(s=new Game_GenBan,s.name=t[a].work_id+"genban",this.group_game.addChildAt(s,this.group_game.getChildIndex(e))),0!=t[a].slaveStatus?(s.x=e.x+e.width/2-s.width/2,s.y=e.y+e.height-80,s.setDate(t[a],i)):(s.y=i.y+i.height-s.height,s.x=i.x+i.width/2-s.width/2,s.setDate2(t[a],i)),0!=t[a].experience){var n={img:"jingyan_png",count:t[a].experience,name:"经验",bendi:1};t[a].props.push(n)}if(0!=t[a].gold){var o={img:"gold2_png",count:t[a].gold,name:"金币",bendi:1};t[a].props.push(o)}if(0!=t[a].props.length){var r=this.group_game.getChildByName(t[a].work_id+"yulan");null==r&&(r=new Game_GenBan_ShouYi,r.name=t[a].work_id+"yulan",r.x=i.x-i.width/2+i.width/2,r.y=i.y-r.height,this.group_game.addChild(r)),r.setDate(t[a])}}}},e.prototype.tellBackStage=function(){FachUtils.Get2("/plant/land/share/put",function(t){},function(t){})},e.prototype.getTouQUinFo=function(){FachUtils.Get2("/plant/stealNews",function(t){t.status&&0!=t.news.hb&&Director.getInstance().pushSceneNoTw(new BeiTou(t))},function(t){})},e.prototype.GetHaoYou=function(){var t=this;FachUtils.Get2("/user/apllys",function(e){e.status?0!=e.resource.length?t.rec_haoyou.visible=!0:t.rec_haoyou.visible=!1:PopoP.getTips(e.message)},function(t){})},e.prototype.BaHeKaiQi=function(){var t=this;console.log("~~~~~~~~拔河~~~~~~~~~~~~~"),FachUtils.Get2("/tug/eventStatus",function(e){if(e.status){t.bahedate=e.resource;var i=t.group_game.getChildByName("jiangbei");e.resource.status?null==i&&(i=new AnimalDragon,i.name="jiangbei",i.x=t.img_hongbao.x,i.y=t.img_hongbao.y+60,i.setDate("奖杯_2"),t.group_game.addChildAt(i,t.group_game.getChildIndex(t.img_hongbao)-1),i.PlayAni4(),t.img_hongbao.alpha=0,t.suo_hongbaozhengduo.visible=!1):(null!=i&&t.group_game.removeChild(i),t.img_hongbao.alpha=1,t.suo_hongbaozhengduo.visible=!0),2==t.bahedate.joinStatus,1==t.bahedate.joinStatus}},function(t){})},e.prototype.CloseAll=function(){},e.prototype.remoSelectSeed=function(){var t=Director.getInstance().gameLayer.getChildByName("selectseed");this.tudi_selected_pond=0,null!=t?egret.Tween.get(t).to({y:Director.getInstance().gameLayer.stageHeight},200).call(function(){t.parent.removeChild(t),this.group_menu.visible=!0},this):this.group_menu.visible=!0},e.prototype.remoSelecAnimal=function(){var t=Director.getInstance().gameLayer.getChildByName("selectanimal");this.animal_selected_pond=0,null!=t?egret.Tween.get(t).to({y:Director.getInstance().gameLayer.stageHeight},200).call(function(){t.parent.removeChild(t),this.group_menu.visible=!0},this):this.group_menu.visible=!0},e.prototype.addSelectSeed=function(){if(this.remoSelecAnimal(),null==Director.getInstance().gameLayer.getChildByName("selectseed")){this.group_menu.visible=!1;var t=new SelectSeed;t.y=Director.getInstance().gameLayer.stageHeight,Director.getInstance().gameLayer.addChild(t),egret.Tween.get(t).to({y:Director.getInstance().gameLayer.stageHeight-t.height},200)}},e.prototype.addSelectAnimal=function(){if(this.remoSelectSeed(),null==Director.getInstance().gameLayer.getChildByName("selectanimal")){this.group_menu.visible=!1;var t=new SelectAnimal;t.y=Director.getInstance().gameLayer.stageHeight,Director.getInstance().gameLayer.addChild(t),egret.Tween.get(t).to({y:Director.getInstance().gameLayer.stageHeight-t.height},200)}},e.prototype.FillData=function(t,e){this.vip_tudi.visible=!1;for(var i=0;i<t.length;i++)JSON.stringify(t[i])!=JSON.stringify(this.TuDiBeans[t[i].code-1].data)&&this.TuDiBeans[t[i].code-1].setDate(t[i]),this.TuDiBeans[e[i].landCode-1].setLockDate(e[i]),0==t[i].status&&3==e[i].cdtTpye&&(this.vip_tudi.visible=!0,this.group_game.addChildAt(this.vip_tudi,this.group_game.getChildIndex(this.tudis[e[i].landCode-1])+1),this.vip_tudi.x=this.tudis[e[i].landCode-1].x+this.tudis[e[i].landCode-1].width/2-this.vip_tudi.width/2,this.vip_tudi.y=this.tudis[e[i].landCode-1].y+this.tudis[e[i].landCode-1].height/2-this.vip_tudi.height,this.vip_tudi.name=e[i].landCode-1+"");this.TuDiYJSH()},e.prototype.TuDiYJSH=function(){for(var t=!1,e=0,i=0;i<this.TuDiBeans.length;i++){if(this.TuDiBeans[i].img_yijian.visible)return;3==this.TuDiBeans[i].data.status&&(e+=1)}for(var i=0;i<this.TuDiBeans.length;i++)3==this.TuDiBeans[i].data.status&&!t&&e>1&&(this.TuDiBeans[i].img_yijian.visible=!0,this.TuDiBeans[i].img_shouhuo.visible=!1,t=!0)},e.prototype.AnimalYJSH=function(){for(var t=!1,e=0,i=0;i<this.animalBeans.length;i++){if(this.animalBeans[i].img_yijian.visible)return;3==this.animalBeans[i].data.status&&(e+=1)}for(var i=0;i<this.animalBeans.length;i++)3==this.animalBeans[i].data.status&&!t&&e>1&&(this.animalBeans[i].img_yijian.visible=!0,this.animalBeans[i].img_shouhuo.visible=!1,t=!0)},e.prototype.VipTuDi=function(){this.TuDiBeans[Number(this.vip_tudi.name)].tudi.dispatchEvent(new egret.TouchEvent(egret.TouchEvent.TOUCH_TAP))},e.prototype.FillAnimal=function(t,e){var i=0,a=0;this.vip_animal.visible=!1;for(var s=0;s<t.length;s++)JSON.stringify(t[s])!=JSON.stringify(this.animalBeans[t[s].code-1].data)&&this.animalBeans[t[s].code-1].setDate(t[s]),t[s].status>=1&&a++,t[s].status>=2&&i++,this.animalBeans[e[s].landCode-1].setLockDate(e[s]),0==t[s].status&&3==e[s].cdtTpye&&(this.vip_animal.visible=!0,this.group_game.addChildAt(this.vip_animal,this.group_game.getChildIndex(this.animaltudis[e[s].landCode-1])+1),this.vip_animal.x=this.animaltudis[e[s].landCode-1].x+this.animaltudis[e[s].landCode-1].width/2-this.vip_animal.width/2,this.vip_animal.y=this.animaltudis[e[s].landCode-1].y+this.animaltudis[e[s].landCode-1].height/2-this.vip_animal.height,this.vip_animal.name=e[s].landCode-1+"");this.lab_muchangNum.text=i+"/"+a,this.AnimalYJSH()},e.prototype.VipAnimal=function(){this.animalBeans[Number(this.vip_animal.name)].tudi.dispatchEvent(new egret.TouchEvent(egret.TouchEvent.TOUCH_TAP))},e.prototype.ShouHUo=function(t,e,i){t-=1,this.touchEnabled=!1,this.scroll.scrollPolicyH="off",this.scroll.scrollPolicyV="off";var a;switch(i){case 1:a=this.tudis[t];break;case 2:a=this.animaltudis[t]}var s=new egret.Timer(100,6);s.addEventListener(egret.TimerEvent.TIMER,this.JingHuaFly.bind(this,a,e),this),s.start(),0!=e.hb&&this.HongBaoFly(a,e)},e.prototype.yiJianShouHUo=function(t,e){this.touchEnabled=!1,this.scroll.scrollPolicyH="off",this.scroll.scrollPolicyV="off";for(var i,a=0;a<t.length;a++){var s=t[a].code-1;i=1==e?this.tudis[s]:this.animaltudis[s];var n=this.createBitmap("nengliang_png",this.top_nengliang,i);n.width=60,n.height=60;var o=this.createBitmap("gold2_png",this.top_gold,i),r=this.createBitmap("hongbao2_png",this.top_hongbao,i);r.width=60,r.height=65,this.YiJianFly(n,this.top_nengliang),this.YiJianFly(o,this.top_gold),this.YiJianFly(r,this.top_hongbao,!0)}},e.prototype.JingHuaFly=function(t,e,i){var a=i.currentTarget.repeatCount,s=i.currentTarget.currentCount;3>=s&&this.GoldFly(t,e,s);var n=this.createBitmap("nengliang_png",this.top_nengliang,t);n.width=60,n.height=60;var o=function(){this.contains(n)&&(this.removeChild(n),n=null)},r=function(){this.lab_nengLiang.text=DataUtils.floot(Number(this.lab_nengLiang.text)+e.plt_sessence/a)+"",egret.Tween.get(this.top_nengliang).to({scaleX:1.1,scaleY:1.1},200).call(function(){this.top_nengliang.scaleX=1,this.top_nengliang.scaleY=1},this),egret.Tween.get(n).to({alpha:0},200).call(o,this),a==s&&(this.scroll.scrollPolicyH="on",this.scroll.scrollPolicyV="on",Director.getInstance().getUser(!0))},h=this.top_nengliang.x+this.top_nengliang.width/2,c=this.top_nengliang.y+this.top_nengliang.height/2;SoundsMgr.removeCell(s),egret.Tween.get(n).to({x:h,y:c,alpha:1},800,egret.Ease.sineOut).call(r,this)},e.prototype.YiJianFly=function(t,e,i){var a=function(){null!=t.parent&&(t.parent.removeChild(t),t=null)},s=function(){egret.Tween.get(e).to({scaleX:1.1,scaleY:1.1},200).call(function(){e.scaleX=1,e.scaleY=1},this),i&&(this.scroll.scrollPolicyH="on",this.scroll.scrollPolicyV="on",this.canShouHUoSeed=[],Director.getInstance().getUser(!0)),egret.Tween.get(t).to({alpha:0},200).call(a,this)},n=e.x+e.width/2,o=e.y+e.height/2;egret.Tween.get(t).to({x:n,y:o,alpha:1},800,egret.Ease.sineOut).call(s,this)},e.prototype.createBitmap=function(t,e,i){var a=new egret.Bitmap(RES.getRes(t));a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2;var s=Math.round(20*Math.random()+1),n=(Math.round(4*Math.random()+1),Math.round(180*Math.random()));return a.rotation=n,this.addChildAt(a,this.getChildIndex(e)-1),a.x=i.x-this.group_game.scrollH+i.width/2+s,a.y=i.y-this.group_game.scrollV+s,a},e.prototype.GoldFly=function(t,e,i){var a=this.createBitmap("gold2_png",this.top_gold,t);a.width=60,a.height=60;var s=function(){this.contains(a)&&(this.removeChild(a),a=null)},n=function(){this.lab_gold.text=DataUtils.floot(Number(this.lab_gold.text)+e.gold/3)+"",egret.Tween.get(this.top_gold).to({scaleX:1.1,scaleY:1.1},200).call(function(){this.top_gold.scaleX=1,this.top_gold.scaleY=1},this),egret.Tween.get(a).to({alpha:0},200).call(s,this)};a.visible=!0;var o=this.top_gold.x+this.top_gold.width/2,r=this.top_gold.y+this.top_gold.height/2;egret.Tween.get(a).to({x:o,y:r,alpha:1},800,egret.Ease.sineOut).call(n,this)},e.prototype.HongBaoFly=function(t,e){var i=this.createBitmap("hongbao2_png",this.top_hongbao,t);i.width=60,i.height=65;var a=function(){this.contains(i)&&(this.removeChild(i),i=null)},s=function(){this.lab_hongbao.text=DataUtils.floot(Number(this.lab_hongbao.text)+e.hb)+"",egret.Tween.get(this.top_hongbao).to({scaleX:1.1,scaleY:1.1},200).call(function(){this.top_hongbao.scaleX=1,this.top_hongbao.scaleY=1},this),egret.Tween.get(i).to({alpha:0},200).call(a,this)};i.visible=!0;var n=this.top_hongbao.x+this.top_hongbao.width/2,o=this.top_hongbao.y+this.top_hongbao.height/2;egret.Tween.get(i).to({x:n,y:o,alpha:1},800,egret.Ease.sineOut).call(s,this)},e.prototype.houseCom=function(t){this.ball=new egret.Bitmap(RES.getRes(t)),this.ball.width=280,this.ball.height=280,this.addChild(this.ball),this.ball.x=Director.getInstance().gameLayer.stageWidth/2-this.ball.width/2,this.ball.y=Director.getInstance().gameLayer.stageHeight/2-this.ball.height/2;var e=this;setTimeout(function(){egret.Tween.get(e).to({bse:1},1e3).call(e.moveOver,e),egret.Tween.get(e.ball).to({alpha:.8,scaleX:.2,scaleY:.2},2e3)},100)},e.prototype.Far=function(){this.tudinum=this.tudinum%9,this.guang.texture=RES.getRes("guang"+this.tudinum+"_png"),this.tudinum++},Object.defineProperty(e.prototype,"bse",{get:function(){return 0},set:function(t){this.ball.x=(1-t)*(1-t)*750/2-this.ball.width/2+2*t*(1-t)*175+t*t*(this.img_beibao.x+this.img_beibao.width/2+50),this.ball.y=(1-t)*(1-t)*1334/2-this.ball.height/2+2*t*(1-t)*567+t*t*(this.img_beibao.y+50)},enumerable:!0,configurable:!0}),e.prototype.moveOver=function(){this.ball.parent.removeChild(this.ball),this.rec_beibao.visible=!0},e.prototype.GunPing=function(){var t=this,e=egret.localStorage.getItem("scrollText");this.lab_gonggao.text=e;var i=(1334+this.lab_gonggao.width)/.1;t.lab_gonggao.x=this.src_gonggao.width,egret.Tween.get(t.lab_gonggao).to({x:0-t.lab_gonggao.width},i).wait(3e3).call(this.GunPing,t)},e.prototype.Remove=function(){this.willFinish=!0,egret.Tween.pauseTweens(this.lab_gonggao)},e.prototype.FengChang=function(t){if(0!=t.slaveStatus){var e=new ChanChu;e.setDate(t),Director.getInstance().pushSceneNoTw(e)}else if(0==t.props.length){var i=new GenBan;i.setDate(t),Director.getInstance().pushSceneNoTw(i)}else{var a=new ChanChu;a.setDate(t),Director.getInstance().pushSceneNoTw(a)}},e.prototype.RemoveGenBan_ShouYI=function(t){var e=this.group_game.getChildByName(t+"yulan");null!=e&&this.group_game.removeChild(e)},e.prototype.openHongBao=function(){var t=this;FachUtils.Get("/tug/eventStatus",function(e){if(e.status){t.bahedate=e.resource;var i=t.group_game.getChildByName("jiangbei");if(e.resource.status)switch(null==i&&(i=new AnimalDragon,i.name="jiangbei",i.x=t.img_hongbao.x,i.y=t.img_hongbao.y+60,i.setDate("奖杯_2"),t.group_game.addChildAt(i,t.group_game.getChildIndex(t.img_hongbao)-1),i.PlayAni4(),t.img_hongbao.alpha=0,t.suo_hongbaozhengduo.visible=!1),t.bahedate.joinStatus){case 0:var a=new HongBaoZhengDuo,s=(new CallBackFunc).handler(t.openHongBao,t,[]);a.setBack(t.bahedate,s),Director.getInstance().pushScene(a);break;case 1:var n=new BaHe(t.bahedate);Director.getInstance().pushScene(n);break;case 2:var o=new BaHe_Result;o.setDate(t.bahedate),Director.getInstance().pushSceneScal(o)}else null!=i&&t.group_game.removeChild(i),t.img_hongbao.alpha=1,t.suo_hongbaozhengduo.visible=!0,PopoP.getTips("活动暂未开放")}},function(t){})},e}(eui.Component);__reflect(Game.prototype,"Game");var GameEvent=function(t){function e(e,i,a){return void 0===i&&(i=!1),void 0===a&&(a=!1),t.call(this,e,i,a)||this}return __extends(e,t),e}(egret.Event);GameEvent.getUserInfo="getUserInfo",GameEvent.touchYes="touchYes",GameEvent.willRemove="willRemove",GameEvent.Removed="Removed",__reflect(GameEvent.prototype,"GameEvent");var GameTitle=function(t){function e(e,i,a,s,n){var o=t.call(this)||this;return o.haoyoudata=n,o.type=e,o.touchx=i.stageX,o.touchy=i.stageY,o.img=a,o.hbdata=s,o.skinName="game_title",o}return __extends(e,t),e.prototype.createChildren=function(){this.y=-200,egret.Tween.get(this).to({y:0},500).call(function(){this.Fly()},this),this.initUser()},e.prototype.Remove=function(){var t=this;egret.Tween.get(this).to({y:-200},500).call(function(){t.parent.removeChild(this)},this)},e.prototype.Fly=function(){var t=new egret.Timer(100,6);t.addEventListener(egret.TimerEvent.TIMER,this.JingHuaFly.bind(this,this.hbdata),this),t.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.Complete,this),t.start(),this.HongBaoFly(this.hbdata)},e.prototype.Complete=function(){this.img.visible=!1,Director.getInstance().gameLayer.addChild(new HaoYou_TiShi(this.type,this.haoyoudata,this.hbdata))},e.prototype.initUser=function(){this.user=JSON.parse(egret.localStorage.getItem("user")),this.lab_gold.text=DataUtils.floot(this.user.gold),this.lab_hongbao.text=DataUtils.floot(this.user.hb),this.lab_nengLiang.text=DataUtils.floot(this.user.plt_sessence),null!=this.user.avatar&&""!=this.user.avatar?this.img_icon.source=this.user.avatar:this.img_icon.source="icon1_png",this.rec_tili.width=this.user.power/100*90,this.lab_lv.text=this.user["class"],"会员"==this.user.appLevel.levelName?this.img_lv.source="chenghao0_png":"白银店主"==this.user.appLevel.levelName?this.img_lv.source="chenghao1_png":"黄金店主"==this.user.appLevel.levelName?this.img_lv.source="chenghao2_png":"销售经理"==this.user.appLevel.levelName?this.img_lv.source="chenghao4_png":this.img_lv.source=""},e.prototype.JingHuaFly=function(t,e){var i=this,a=e.currentTarget.repeatCount,s=e.currentTarget.currentCount;3>=s&&this.GoldFly(t,s);var n=new egret.Bitmap(RES.getRes("nengliang_png"));n.width=60,n.height=60,n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2;var o=(Math.round(20*Math.random()+1),Math.round(4*Math.random()+1),Math.round(180*Math.random()));n.rotation=o,this.addChildAt(n,this.getChildIndex(this.top_nengliang)-1),n.x=this.touchx-n.width/2,n.y=this.touchy-n.height/2;var r=function(){this.contains(n)&&(this.removeChild(n),n=null)},h=function(){this.lab_nengLiang.text=DataUtils.floot(Number(this.lab_nengLiang.text)+t.ess/a)+"",egret.Tween.get(this.top_nengliang).to({scaleX:1.1,scaleY:1.1},200).call(function(){this.top_nengliang.scaleX=1,this.top_nengliang.scaleY=1},this),egret.Tween.get(n).to({alpha:0},200).call(r,this),a==s&&(Director.getInstance().getUser(!0),i.Remove())};n.visible=!0;var c=this.top_nengliang.x+this.top_nengliang.width/2,u=this.top_nengliang.y+this.top_nengliang.height/2;SoundsMgr.removeCell(s),egret.Tween.get(n).to({x:c,y:u,alpha:1},800,egret.Ease.sineOut).call(h,this)},e.prototype.GoldFly=function(t,e){var i=new egret.Bitmap(RES.getRes("gold2_png"));i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2;var a=(Math.round(20*Math.random()+1),Math.round(4*Math.random()+1),Math.round(180*Math.random()));i.rotation=a,this.addChildAt(i,this.getChildIndex(this.top_gold)-1),i.x=this.touchx-i.width/2,i.y=this.touchy-i.height/2;var s=function(){this.contains(i)&&(this.removeChild(i),i=null)},n=function(){this.lab_gold.text=DataUtils.floot(Number(this.lab_gold.text)+t.gold/3)+"",egret.Tween.get(this.top_gold).to({scaleX:1.1,scaleY:1.1},200).call(function(){this.top_gold.scaleX=1,this.top_gold.scaleY=1},this),egret.Tween.get(i).to({alpha:0},200).call(s,this)};i.visible=!0;var o=this.top_gold.x+this.top_gold.width/2,r=this.top_gold.y+this.top_gold.height/2;egret.Tween.get(i).to({x:o,y:r,alpha:1},800,egret.Ease.sineOut).call(n,this)},e.prototype.HongBaoFly=function(t){var e=new egret.Bitmap(RES.getRes("hongbao2_png"));e.width=60,e.height=65,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2;var i=(Math.round(20*Math.random()+1),Math.round(4*Math.random()+1),Math.round(180*Math.random()));e.rotation=i,this.addChildAt(e,this.getChildIndex(this.top_hongbao)-1),e.x=this.touchx-e.width/2,e.y=this.touchy-e.height/2;var a=function(){this.contains(e)&&(this.removeChild(e),e=null)},s=function(){this.lab_hongbao.text=DataUtils.floot(Number(this.lab_hongbao.text)+t.hb)+"",egret.Tween.get(this.top_hongbao).to({scaleX:1.1,scaleY:1.1},200).call(function(){this.top_hongbao.scaleX=1,this.top_hongbao.scaleY=1},this),egret.Tween.get(e).to({alpha:0},200).call(a,this)};e.visible=!0;var n=this.top_hongbao.x+this.top_hongbao.width/2,o=this.top_hongbao.y+this.top_hongbao.height/2;egret.Tween.get(e).to({x:n,y:o,alpha:1},800,egret.Ease.sineOut).call(s,this)},e}(eui.Component);__reflect(GameTitle.prototype,"GameTitle");var GetMoney=function(t){function e(){var e=t.call(this)||this;return e.skinName="getmoney",e}return __extends(e,t),e.prototype.createChildren=function(){this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.btn_nc.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Nc,this),this.btn_mc.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Mc,this),this.btn_haoyou.addEventListener(egret.TouchEvent.TOUCH_TAP,this.HaoYou,this),this.game=Director.getInstance().gameLayer.getChildByName("game")},e.prototype.Nc=function(){this.game.group_game.scrollH=187,this.game.group_game.scrollV=183,Director.getInstance().removeSceneNoTw(this)},e.prototype.Mc=function(){this.game.group_game.scrollH=750,this.game.group_game.scrollV=380,Director.getInstance().removeSceneNoTw(this)},e.prototype.HaoYou=function(){Director.getInstance().pushScene(new HaoYou),Director.getInstance().removeSceneNoTw(this)},e.prototype.Close=function(){Director.getInstance().removeSceneNoTw(this)},e}(eui.Component);__reflect(GetMoney.prototype,"GetMoney");var Seed_ChanChu_Item_XiangQing=function(t){function e(e){var i=t.call(this)||this;return i.data=e,i.skinName="beibao_xiangqing",i}return __extends(e,t),e.prototype.createChildren=function(){this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.img.source=Fach.host+this.data.img,this.lab_name.text=this.data.name,this.lab_yongtu.text=this.data.use,this.lab_xq.text=this.data.des,this.img.maxHeight=this.group.height,this.img.maxWidth=this.group.width,this.btn_yes.visible=!1,this.group_sell.visible=!1},e.prototype.Size=function(){if(this.img.width>this.group.width){var t=this.group.width/this.img.width;this.img.height=this.img.height*t,this.img.width=this.img.width*t}if(this.img.height>this.group.height){var e=this.group.height/this.img.height;this.img.height=this.img.height*e,this.img.width=this.img.width*e}},e.prototype.Yes=function(){},e.prototype.Close=function(){SoundsMgr.clickCell(),this.parent.removeChild(this)},e.prototype.TouchSell=function(){},e.prototype.Sell=function(){FachUtils.Get("/warahouse/sell/"+this.data._id,function(t){if(t.status){var e=Director.getInstance().gameLayer.getChildByName("cangku");e.init(),PopoP.getTips(t.message),Director.getInstance().getUser()}else PopoP.getTips(t.message)},function(t){PopoP.getTips(t.message)})},e}(eui.Component);__reflect(Seed_ChanChu_Item_XiangQing.prototype,"Seed_ChanChu_Item_XiangQing");var Seed_ChanChu_Item=function(t){function e(){var e=t.call(this)||this;return e.skinName="beibao_item1",e}return __extends(e,t),e.prototype.createChildren=function(){console.log(this.currentState),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Touch,this)},e.prototype.Touch=function(){null!=this.data&&Director.getInstance().gameLayer.addChild(new Seed_ChanChu_Item_XiangQing(this.data))},e.prototype.dataChanged=function(){null!=this.data&&(this.lab_name.text=this.data.name,this.img.source=Fach.host+this.data.img,null!=this.data.count?this.lab_num.text="x "+DataUtils.floot(this.data.count):this.lab_num.text="",this.img.maxHeight=this.group.width,this.img.maxWidth=this.group.height,1==this.data.type?this.img_bg.visible=!0:2==this.data.type&&(this.img_bg.visible=!1))},e}(eui.ItemRenderer);__reflect(Seed_ChanChu_Item.prototype,"Seed_ChanChu_Item");var Seed_XiangQIng=function(t){function e(e,i){var a=t.call(this)||this;return a.data=e,a.type=i,a.skinName="seed_xiangQing",a}return __extends(e,t),e.prototype.createChildren=function(){this.img_close.addEventListener("touchTap",this.Close,this),this.img_jiesuo.addEventListener("touchTap",this.JieSuo,this),this.img_hecheng.addEventListener("touchTap",this.HeCheng,this),this.setType(),this.init()},e.prototype.setType=function(){switch(this.type){case 1:this.lab_seedName.strokeColor=14191165,this.img_bg.source="seed_xiangqing_un_png",this.img_suo.visible=!0,this.img_jiesuo.visible=!0,this.group_btn.visible=!0;break;case 2:this.img_bg.source="seed_xiangqing_png",this.img_suo.visible=!1,this.img_jiesuo.visible=!1,this.group_btn.visible=!1,this.img_hecheng.visible=!1}},e.prototype.init=function(){var t=this;FachUtils.Get("/plant/userDetail/"+this.data._id,function(e){e.status?t.initDate(e.resource.plant):PopoP.getTips(e.message)},function(t){PopoP.getTips(t.message)})},e.prototype.initDate=function(t){if(this.img.source=Fach.host+t.img1,this.lab_seedName.text=t.name,this.lab_gold.text=DataUtils.floot(t.maxGold),this.lab_hongbao.text=DataUtils.floot(t.firHb),this.lab_nengliang.text=DataUtils.floot(t.maxEssence),this.lab_clock.text="("+t.hasUnlockTime+"/"+t.unlockTime+")",this.lab_needGold.text=DataUtils.floot(t.everyPrice),null!=t.props)if(0==t.props)this.img_wu.visible=!0;else{this.img_wu.visible=!1;var e=this;e.list.dataProvider=new eui.ArrayCollection(t.props),e.list.itemRenderer=Seed_ChanChu_Item,4==t.props.length?(e.list.scaleX=.8,e.list.scaleY=.8):5==t.props.length&&(e.list.scaleX=.8,e.list.scaleY=.8)}else this.img_wu.visible=!0;switch(t.hasUnlockTime==t.unlockTime&&(this.group_btn.visible=!1,this.img_jiesuo.visible=!1,this.img_hecheng.visible=!0),t.qualityId){case 0:this.lab_pinzhi.text="奇迹品质";break;case 1:this.lab_pinzhi.text="普通品质";break;case 2:this.lab_pinzhi.text="高级品质";break;case 3:this.lab_pinzhi.text="稀有品质";break;case 4:this.lab_pinzhi.text="超凡品质";break;case 5:this.lab_pinzhi.text="史诗品质";break;case 6:this.lab_pinzhi.text="传奇品质"}},e.prototype.JieSuo=function(){var t=this;FachUtils.Get("/plant/unlock/"+this.data._id,function(e){e.status?(Director.getInstance().getUser(),t.JieSuoChengGong(e.resource.plant)):PopoP.getTips(e.message)},function(t){PopoP.getTips(t.message)})},e.prototype.JieSuoChengGong=function(t){this.img.source=Fach.host+t.img1,this.lab_seedName.text=t.name,this.lab_gold.text=DataUtils.floot(t.maxGold),this.lab_hongbao.text=DataUtils.floot(t.firHb),this.lab_nengliang.text=DataUtils.floot(t.maxEssence),this.lab_clock.text="("+t.hasUnlockTime+"/"+t.unlockTime+")",this.lab_needGold.text=DataUtils.floot(t.everyPrice),t.hasUnlockTime==t.unlockTime&&(this.group_btn.visible=!1,this.img_jiesuo.visible=!1,this.img_hecheng.visible=!0)},e.prototype.HeCheng=function(){var t=this;FachUtils.Get("/plant/cb/"+this.data._id,function(e){if(e.status){t.type=2,t.setType(),PopoP.getTips(e.message);var i=Director.getInstance().gameLayer.getChildByName("selectseed");i.TouchBiaoQian()}else PopoP.getTips(e.message)},function(t){PopoP.getTips(t.message)})},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e}(eui.Component);__reflect(Seed_XiangQIng.prototype,"Seed_XiangQIng");var SelectAnimal_Item=function(t){function e(){var e=t.call(this)||this;return e.isClock=!1,e.skinName="selectSeed_Item",e.rec_up.addEventListener(egret.TouchEvent.TOUCH_TAP,e.Touch,e),e.rec_down.addEventListener(egret.TouchEvent.TOUCH_TAP,e.Down,e),e}return __extends(e,t),e.prototype.Down=function(){this.isClock?Director.getInstance().pushScene(new Animal_XiangQing(this.data,1)):Director.getInstance().pushScene(new Animal_XiangQing(this.data,2))},e.prototype.createChildren=function(){},e.prototype.dataChanged=function(){if(this.lab_name.text=this.data.name,this.lab_shouyi.text=DataUtils.floot(this.data.firHb)+"元",this.img.source=Fach.host+this.data.img,-1==this.data.prop.needProp?this.lab_zhongzhi.text=0==this.data.plantPrice?"免费":DataUtils.floot(this.data.plantPrice):(this.lab_zhongzhi.text=this.data.prop.needCount,this.img_seed.source=this.data.prop.img),this.data.unclockStatus<=1){this.img_suo.visible=!0,this.touchEnabled=!1;var t=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0];this.colorFlilter=new egret.ColorMatrixFilter(t),this.img.filters=[this.colorFlilter],this.isClock=!0}else this.isClock=!1,this.img_suo.visible=!1,this.img.filters=null},e.prototype.Touch=function(t){t.stopPropagation();var e=Director.getInstance().gameLayer.getChildByName("game"),i=this,a={id:this.data._id};return this.isClock?void Director.getInstance().pushScene(new Animal_XiangQing(this.data,1)):void FachUtils.Post("/animal/"+e.animal_selected_pond,a,function(t){t.status?(e.animal_selected_pond=0,Director.getInstance().getUser(!0)):1081==t.statusCode?(Director.getInstance().pushScene(new Animal_XiangQing(i.data,2)),PopoP.getTips(t.message)):PopoP.getTips(t.message)},function(t){})},e}(eui.ItemRenderer);__reflect(SelectAnimal_Item.prototype,"SelectAnimal_Item");var SelectAnimal=function(t){function e(){var e=t.call(this)||this;return e.skinName="selectSeed",e.name="selectanimal",e}return __extends(e,t),e.prototype.createChildren=function(){var t=this;this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.addEventListener("touchTap",this.Touch,this),FachUtils.Get("/animal/tags",function(e){if(e.status){var i=e.resource.plants;t.list.dataProvider=new eui.ArrayCollection(i),t.list.itemRenderer=SelectAnimal_Item,t.BiaoQian(e.resource.tags)}},function(t){})},e.prototype.Touch=function(t){switch(t.target){case this.rad_shishi:case this.rad_chaofan:case this.rad_gaoji:case this.rad_tutong:case this.rad_xiyou:case this.rad_chuanqi:case this.rad_qiji:console.log(t.target.name),this.TouchBiaoQian(t.target.name)}},e.prototype.TouchBiaoQian=function(t){var e=this;e.group.scrollH=0,FachUtils.Get("/animal/seed/"+t,function(t){if(t.status){var i=t.resource.plants;
e.list.dataProvider=new eui.ArrayCollection(i),e.list.itemRenderer=SelectSeed_Item,e.list.dataProviderRefreshed()}},function(t){})},e.prototype.BiaoQian=function(t){for(var e=0;e<t.length;e++){var i=this.group_biaoqian.getChildByName(t[e].id);i.visible=!0,this.group_biaoqian.addChildAt(i,e)}this.group_biaoqian.getChildAt(0).selected=!0},e.prototype.Close=function(){var t=Director.getInstance().gameLayer.getChildByName("game");t.remoSelecAnimal()},e}(eui.Component);__reflect(SelectAnimal.prototype,"SelectAnimal");var SelectSeed_Item=function(t){function e(){var e=t.call(this)||this;return e.isClock=!1,e.skinName="selectSeed_Item",e.rec_up.addEventListener(egret.TouchEvent.TOUCH_TAP,e.Touch,e),e.rec_down.addEventListener(egret.TouchEvent.TOUCH_TAP,e.Down,e),e}return __extends(e,t),e.prototype.createChildren=function(){console.log(1)},e.prototype.dataChanged=function(){if(this.lab_name.text=this.data.name,this.lab_shouyi.text=DataUtils.floot(this.data.firHb)+"元",this.img.source=Fach.host+this.data.img,-1==this.data.prop.needProp?this.lab_zhongzhi.text=0==this.data.plantPrice?"免费":DataUtils.floot(this.data.plantPrice):(this.lab_zhongzhi.text=this.data.prop.needCount,this.img_seed.source=this.data.prop.img),this.data.unclockStatus<=1){this.img_suo.visible=!0,this.touchEnabled=!1;var t=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0];this.colorFlilter=new egret.ColorMatrixFilter(t),this.img.filters=[this.colorFlilter],this.isClock=!0}else this.isClock=!1,this.img_suo.visible=!1,this.img.filters=null},e.prototype.Down=function(){this.isClock?Director.getInstance().pushScene(new Seed_XiangQIng(this.data,1)):Director.getInstance().pushScene(new Seed_XiangQIng(this.data,2))},e.prototype.Touch=function(t){t.stopPropagation();var e=Director.getInstance().gameLayer.getChildByName("game"),i=this,a={id:this.data._id};return this.isClock?void Director.getInstance().pushScene(new Seed_XiangQIng(this.data,1)):void FachUtils.Post("/plant/"+e.tudi_selected_pond,a,function(t){t.status?(e.tudi_selected_pond=0,Director.getInstance().getUser(!0)):1081==t.statusCode?(Director.getInstance().pushScene(new Seed_XiangQIng(i.data,2)),PopoP.getTips(t.message)):PopoP.getTips(t.message)},function(t){})},e}(eui.ItemRenderer);__reflect(SelectSeed_Item.prototype,"SelectSeed_Item");var SelectSeed=function(t){function e(){var e=t.call(this)||this;return e.biaoqianName=null,e.skinName="selectSeed",e.name="selectseed",e}return __extends(e,t),e.prototype.createChildren=function(){var t=this;this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.addEventListener("touchTap",this.Touch,this),FachUtils.Get("/plant/tags",function(e){if(e.status){var i=e.resource.plants;t.list.dataProvider=new eui.ArrayCollection(i),t.list.itemRenderer=SelectSeed_Item,t.BiaoQian(e.resource.tags)}},function(t){})},e.prototype.Touch=function(t){switch(t.target){case this.rad_shishi:case this.rad_chaofan:case this.rad_gaoji:case this.rad_tutong:case this.rad_xiyou:case this.rad_chuanqi:case this.rad_qiji:this.biaoqianName=t.target.name,this.TouchBiaoQian()}},e.prototype.TouchBiaoQian=function(){var t=this;t.group.scrollH=0,FachUtils.Get("/plant/seed/"+this.biaoqianName,function(e){if(e.status){var i=e.resource.plants;t.list.dataProvider=new eui.ArrayCollection(i),t.list.itemRenderer=SelectSeed_Item,t.list.dataProviderRefreshed()}},function(t){})},e.prototype.BiaoQian=function(t){for(var e=0;e<t.length;e++){var i=this.group_biaoqian.getChildByName(t[e].id);i.visible=!0,this.group_biaoqian.addChildAt(i,e)}this.group_biaoqian.getChildAt(0).selected=!0},e.prototype.Close=function(){var t=Director.getInstance().gameLayer.getChildByName("game");t.remoSelectSeed()},e}(eui.Component);__reflect(SelectSeed.prototype,"SelectSeed");var TuDiBean=function(t){function e(e){var i=t.call(this)||this;return i.isChengShu=!1,i.skinName="tudiBean",i.tudi=e,i.tudi.addEventListener(egret.TouchEvent.TOUCH_TAP,i.Touch,i),i.img_shouhuo.addEventListener(egret.TouchEvent.TOUCH_TAP,i.ShouHuo,i),i.img_yijian.addEventListener(egret.TouchEvent.TOUCH_TAP,i.yiJianShouHuo,i),i}return __extends(e,t),e.prototype.createChildren=function(){this.game=Director.getInstance().gameLayer.getChildByName("game"),this.timer=new DateTimer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,this.Timer,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.Removed,this),this.gif=new Gif_action,this.group_1.scaleX=.7,this.group_1.scaleY=.7,this.group.y=this.height;var t=new egret.Shape;t.graphics.beginFill(0),t.graphics.drawRect(0,0,this.group.width,this.group.height),t.graphics.endFill(),t.x=this.group.x,t.y=this.group.y,this.addChild(t),this.group.mask=t},e.prototype.Timer=function(){this.lab_daojishi.text=DataUtils.DaoJiShi(this.data.harvestTime),this.data.harvestTime<(new Date).getTime()-Director.getInstance().ShiJianCha&&(this.removeEventListener(egret.Event.ENTER_FRAME,this.Frame,this),this.timer.stop(),this.data.status=3,this.isChengShu||(this.init(),this.game.TuDiYJSH()))},e.prototype.Touch=function(t){if(t.stopPropagation(),console.log(this.data._id),console.log(this.data.code),0==this.data.status){var e="";switch(this.lockDate.cdtTpye){case 1:e="此土地将于"+this.lockDate.personClass+"级解锁",PopoP.getTips(e);break;case 2:Director.getInstance().pushScene(new FenXiang_TuDi(this.data._id,this.lockDate.inviteCount)),e="邀请"+this.lockDate.inviteCount+"个好友解锁土地";break;case 3:e="花费"+this.lockDate.dimond+"颗钻石解锁土地";var i=new VipJieSuo,a={_id:this.data._id,price:this.lockDate.dimond,type:1};i.setDate(a),Director.getInstance().pushScene(i)}}else if(1==this.data.status){var s=Director.getInstance().gameLayer.getChildByName("game");s.tudi_selected.x=this.tudi.x,s.tudi_selected.y=this.tudi.y,s.tudi_selected.visible=!0,s.group_game.addChildAt(s.tudi_selected,s.group_game.getChildIndex(this.tudi)+1),s.tudi_selected_pond=this.data.code,s.addSelectSeed()}},e.prototype.setDate=function(t){this.data=t,this.init()},e.prototype.setLockDate=function(t){this.lockDate=t},e.prototype.init=function(){if(this.harvestDate=null,this.img_shouhuo.visible=!1,0==this.data.status)this.removeEventListener(egret.Event.ENTER_FRAME,this.Frame,this),this.removeImg(),this.tudi.source="tudi2_png";else if(1==this.data.status)this.removeEventListener(egret.Event.ENTER_FRAME,this.Frame,this),this.removeImg(),this.tudi.source="tudi1_png",this.tudi.touchEnabled=!0;else if(this.data.status>=2){this.tudi.touchEnabled=!1,this.group.visible=!0,this.x=this.tudi.x+this.tudi.width/2-this.width/2,this.y=this.tudi.y+this.tudi.height/2-this.height,this.tudi.parent.addChildAt(this,this.tudi.parent.getChildIndex(this.tudi)+12);this.data.plantTime;this.lab_daojishi.text=DataUtils.DaoJiShi(this.data.harvestTime);var t="";switch(this.data.animationId){case 1e3:t="luhui";break;case 1001:t="hongmei";break;case 1002:t="chengzi";break;case 1003:t="putao";break;case 1004:t="lanmei";break;case 1005:t="mangguo"}if(this.gif.setDate(t),this.group_1.addChildAt(this.gif.role,0),this.isChengShu=!1,3==this.data.status){this.isChengShu=!0,this.gif.chengShu(),this.img_shouhuo.visible=!0,this.group.visible=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.Frame,this),this.timer.stop();var e=this.game.canShouHUoSeed.indexOf(this.data);-1==e&&this.game.canShouHUoSeed.push(this.data)}else this.addEventListener(egret.Event.ENTER_FRAME,this.Frame,this),this.timer.start(),this.gif.chengZhang()}},e.prototype.Frame=function(){this.img_daojishi.width=((new Date).getTime()-Director.getInstance().ShiJianCha-this.data.plantTime)/(this.data.harvestTime-this.data.plantTime)*200},e.prototype.ShouHuo=function(){Director.getInstance().pushSceneNoTw(new Tw_ShouHuo(this.data,this.img_shouhuo,1))},e.prototype.yiJianShouHuo=function(){for(var t=Director.getInstance().gameLayer.getChildByName("game"),e=[],i=0;i<t.canShouHUoSeed.length;i++)e.push(t.canShouHUoSeed[i]);Director.getInstance().pushSceneNoTw(new Tw_YiJianShouHuo(e,this.img_yijian,1))},e.prototype.removeImg=function(){var t=this.group_1.getChildByName("gif");null!=t&&this.group_1.removeChild(t)},e.prototype.Removed=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.Frame,this)},e}(eui.Component);__reflect(TuDiBean.prototype,"TuDiBean");var Tw_ShouHuo=function(t){function e(e,i,a){var s=t.call(this)||this;return s.type=a,s.tudidata=e,s.img=i,s.skinName="tw_shouhuo",s.btn_shouqu.addEventListener(egret.TouchEvent.TOUCH_TAP,s.ShouHuoType,s),s.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,s.Close,s),s}return __extends(e,t),e.prototype.createChildren=function(){switch(this.btn_shouqu.visible=!1,this.type){case 1:this.shouyiSeed();break;case 2:this.shouyiAnimal()}var t=Director.getInstance().gameLayer.getChildByName("game");t.canShouHUoAnimal.indexOf(this.tudidata)},e.prototype.shouyiSeed=function(){var t=this;FachUtils.Get("/plant/harvestPreview/"+this.tudidata._id,function(e){e.status?(t.data=e.resource.harvest,t.initDate(),t.btn_shouqu.visible=!0):(t.btn_shouqu.visible=!1,PopoP.getTips(e.message))},function(t){})},e.prototype.shouyiAnimal=function(){var t=this;FachUtils.Get("/animal/harvestPreview/"+this.tudidata._id,function(e){e.status?(t.data=e.resource.harvest,t.initDate(),t.btn_shouqu.visible=!0):(t.btn_shouqu.visible=!1,PopoP.getTips(e.message))},function(t){})},e.prototype.initDate=function(){if(0==this.data.props.length)this.img_wu.visible=!0;else{this.img_wu.visible=!1;var t=this.data.props,e=this;e.list.dataProvider=new eui.ArrayCollection(t),e.list.itemRenderer=Seed_ChanChu_Item,4==t.length?(e.list.scaleX=.8,e.list.scaleY=.8):5==t.length&&(e.list.scaleX=.8,e.list.scaleY=.8)}this.lab_gold.text=DataUtils.floot(this.data.gold),this.lab_hongbao.text=DataUtils.floot(this.data.hb),this.lab_nengliang.text=DataUtils.floot(this.data.plt_sessence),0==this.data.hb?(this.group_hb.height=0,this.group_hb.visible=!1,this.group_hb.parent.addChildAt(this.group_hb,100)):(this.group_hb.height=70,this.group_hb.visible=!0)},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e.prototype.ShouHuoType=function(){1==this.type?this.ShouHuoSeed():this.ShouHuoAnimal()},e.prototype.ShouHuoSeed=function(){var t=Director.getInstance().gameLayer.getChildByName("game"),e=this;FachUtils.Get("/plant/harvest/"+this.data.land_id,function(i){if(i.status){var a=t.canShouHUoSeed.indexOf(e.tudidata);console.log(a),-1!=a&&t.canShouHUoSeed.splice(a,1),e.img.visible=!1,t.ShouHUo(e.data.land_code,i.resource.harvest,e.type),e.Close()}else PopoP.getTips(i.message)},function(t){})},e.prototype.ShouHuoAnimal=function(){var t=Director.getInstance().gameLayer.getChildByName("game"),e=this;FachUtils.Get("/animal/harvest/"+this.data.land_id,function(i){if(i.status){var a=t.canShouHUoAnimal.indexOf(e.tudidata);console.log(a),-1!=a&&(t.canShouHUoAnimal.splice(a,1),console.log(t.canShouHUoAnimal)),e.img.visible=!1,t.ShouHUo(e.data.land_code,i.resource.harvest,e.type),e.Close()}else PopoP.getTips(i.message)},function(t){})},e}(eui.Component);__reflect(Tw_ShouHuo.prototype,"Tw_ShouHuo");var Tw_YiJianShouHuo=function(t){function e(e,i,a){var s=t.call(this)||this;return s.type=a,s.arrdata=e,s.img=i,s.skinName="tw_shouhuo",s.btn_shouqu.addEventListener(egret.TouchEvent.TOUCH_TAP,s.ShouHuoType,s),s.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,s.Close,s),s}return __extends(e,t),e.prototype.createChildren=function(){switch(this.btn_shouqu.visible=!1,console.log(this.arrdata),this.type){case 1:this.shouyiSeed();break;case 2:this.shouyiAnimal()}},e.prototype.shouyiSeed=function(){var t=this,e={lands:this.arrdata};FachUtils.Post("/plant/totalHarvest",e,function(e){e.status?(t.data=e.resource.harvest,t.initDate(),t.btn_shouqu.visible=!0):PopoP.getTips(e.message)},function(t){})},e.prototype.shouyiAnimal=function(){var t=this,e={lands:this.arrdata};FachUtils.Post("/animal/totalHarvest",e,function(e){e.status?(t.data=e.resource.harvest,t.initDate(),t.btn_shouqu.visible=!0):PopoP.getTips(e.message)},function(t){})},e.prototype.initDate=function(){if(0==this.data.props.length)this.img_wu.visible=!0;else{this.img_wu.visible=!1;var t=this.data.props,e=this;e.list.dataProvider=new eui.ArrayCollection(t),e.list.itemRenderer=Seed_ChanChu_Item,4==t.length?(e.list.scaleX=.8,e.list.scaleY=.8):5==t.length&&(e.list.scaleX=.8,e.list.scaleY=.8)}this.lab_gold.text=DataUtils.floot(this.data.gold),this.lab_hongbao.text=DataUtils.floot(this.data.hb),this.lab_nengliang.text=DataUtils.floot(this.data.plt_sessence),0==this.data.hb?(this.group_hb.height=0,this.group_hb.visible=!1,this.group_hb.parent.addChildAt(this.group_hb,100)):(this.group_hb.height=70,this.group_hb.visible=!0)},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e.prototype.ShouHuoType=function(){1==this.type?this.ShouHuoSeed():this.ShouHuoAnimal()},e.prototype.ShouHuoSeed=function(){var t=Director.getInstance().gameLayer.getChildByName("game"),e=this,i={lands:this.arrdata};FachUtils.Post("/plant/oneKeyHarvest",i,function(i){if(i.status){e.img.visible=!1,t.yiJianShouHUo(e.arrdata,1);for(var a=0;a<e.arrdata.length;a++){var s=t.canShouHUoSeed.indexOf(e.arrdata[a]);-1!=s&&t.canShouHUoSeed.splice(s,1)}e.Close()}else PopoP.getTips(i.message)},function(t){})},e.prototype.ShouHuoAnimal=function(){var t=Director.getInstance().gameLayer.getChildByName("game"),e=this,i={lands:this.arrdata};FachUtils.Post("/animal/oneKeyHarvest",i,function(i){if(i.status){e.img.visible=!1,t.yiJianShouHUo(e.arrdata,2);for(var a=0;a<e.arrdata.length;a++){var s=t.canShouHUoAnimal.indexOf(e.arrdata[a]);console.log(s),-1!=s&&t.canShouHUoAnimal.splice(s,1)}e.Close()}else PopoP.getTips(i.message)},function(t){})},e}(eui.Component);__reflect(Tw_YiJianShouHuo.prototype,"Tw_YiJianShouHuo");var VipJieSuo=function(t){function e(){var e=t.call(this)||this;return e.skinName="vipjiesuo",e}return __extends(e,t),e.prototype.createChildren=function(){this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.img_jiesuo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.JieSuo,this)},e.prototype.JieSuo=function(){var t,e=this;t=1==this.data.type?"/plant/land/dimond/":"/animal/land/dimond/",FachUtils.Get(t+this.data._id,function(t){t.status&&(Director.getInstance().getUser(!0),Director.getInstance().removeSceneNoTw(e)),PopoP.getTips(t.message)},function(t){})},e.prototype.setDate=function(t){this.data=t,this.lab_num.text=this.data.price},e.prototype.Close=function(){Director.getInstance().removeSceneNoTw(this)},e}(eui.Component);__reflect(VipJieSuo.prototype,"VipJieSuo");var ChanChu_Item=function(t){function e(){var e=t.call(this)||this;return e.skinName="beibao_item1",e}return __extends(e,t),e.prototype.createChildren=function(){console.log(this.currentState)},e.prototype.Touch=function(){null!=this.data&&Director.getInstance().gameLayer.addChild(new CangKu_XiangQing(this.data))},e.prototype.dataChanged=function(){null!=this.data&&(this.lab_name.text=this.data.name,"金币"==this.data.name||"经验"==this.data.name?this.img.source=this.data.img:this.img.source=Fach.host+this.data.img,this.lab_num.text="x "+DataUtils.floot(this.data.count),this.img.maxHeight=this.group.width,this.img.maxWidth=this.group.height,this.img_bg.visible=!0)},e}(eui.ItemRenderer);__reflect(ChanChu_Item.prototype,"ChanChu_Item");var ChanChu=function(t){function e(){var e=t.call(this)||this;return e.skinName="chanchu",e}return __extends(e,t),e.prototype.createChildren=function(){this.img_lingqu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.LingQU,this),this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.rec_jiegu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchJieGu,this),this.rec_zhuagenban.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZhuaGEnBan,this)},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e.prototype.setDate=function(t){var e=this;this.data=t,console.log(t.props.length),0==t.props.length&&PopoP.getTips("暂无任何产出"),this.data.fullFlag?this.img_yiman.visible=!0:this.img_yiman.visible=!1,t.props.length=10,e.list_beibao.dataProvider=new eui.ArrayCollection(t.props),e.list_beibao.itemRenderer=ChanChu_Item,e.group_beibao.validateNow();var i;switch(t.work_id){case 1e3:this.img_title.source="text_yangfeng_png",i="没有人帮您养蜂,产出停滞了";break;case 1001:this.img_title.source="text_buyu_png",i="没有人帮您捕鱼,产出停滞了";break;case 1002:i="没有人帮您打捞,产出停滞了",this.img_title.source="text_dalao_png";break;case 1003:i="没有人帮您挖矿,产出停滞了",this.img_title.source="text_wakuang_png";break;case 1004:i="没有人帮您丛林探险,产出停滞了",this.img_title.source="text_conglin_png"}if(0==t.slaveStatus)this.group_genban.visible=!1,this.group_nogenban.visible=!0,this.lab2.visible=!1,this.lab_work.text=i;else{switch(this.lab_jiegu.text="解雇跟班",this.lab2.visible=!0,this.group_genban.visible=!0,this.group_nogenban.visible=!1,null!=t.slave.avatar&&""!=t.slave.avatar?this.img_icon.source=t.slave.avatar:this.img_icon.source="icon1_png",this.lab_name.text=t.slave.nickname,t.work_id){case 1e3:this.lab_note.text="正在帮您养蜂",this.img_title.source="text_yangfeng_png";break;case 1001:this.lab_note.text="正在帮您捕鱼",this.img_title.source="text_buyu_png";break;case 1002:this.lab_note.text="正在给您深海打捞",this.img_title.source="text_dalao_png";break;case 1003:this.lab_note.text="正在给您挖矿",this.img_title.source="text_wakuang_png";break;case 1004:this.lab_note.text="正在给您丛林探险",this.img_title.source="text_conglin_png"}2==t.slaveStatus?this.lab_note.text="您的跟班已经累瘫了~":3==t.slaveStatus&&(this.lab_note.text="您的跟班被"+this.data.other.nickname+"抢走了",this.lab_jiegu.text="查 看")}},e.prototype.ZhuaGEnBan=function(){var t=new GenBan;t.setDate(this.data),Director.getInstance().pushSceneNoTw(t),Director.getInstance().removeScene(this)},e.prototype.TouchJieGu=function(){if(3==this.data.slaveStatus){var t=new QiangDao;t.setDate(this.data);var e=(new CallBackFunc).handler(this.Close,this,[]);t.setCb(e),Director.getInstance().pushScene(t)}else this.JieGu1()},e.prototype.JieGu1=function(){var t=(new CallBackFunc).handler(this.JieGu,this,[]);this.addChild(new TiShi("是否确认解除跟班",t))},e.prototype.LingQU=function(){var t=this,e={work_id:this.data.work_id};FachUtils.Post("/cathSlave/harvest",e,function(e){if(e.status){var i=Director.getInstance().gameLayer.getChildByName("game");i.RemoveGenBan_ShouYI(t.data.work_id),Director.getInstance().getUser();var a=new BaHe_LingQu;console.log(JSON.stringify(t.data.props)),a.setDate(t.data.props),Director.getInstance().pushSceneScal(a);var s=[];s.length=10,t.list_beibao.dataProvider=new eui.ArrayCollection(s),t.list_beibao.itemRenderer=ChanChu_Item,t.group_beibao.validateNow()}PopoP.getTips(e.message)},function(t){})},e.prototype.JieGu=function(){var t=this,e={work_id:this.data.work_id};FachUtils.Post("/cathSlave/freeSlave",e,function(e){e.status&&(t.group_genban.visible=!1,Director.getInstance().getUser()),PopoP.getTips(e.message)},function(t){})},e}(eui.Component);__reflect(ChanChu.prototype,"ChanChu");var DaDou_Result=function(t){function e(e){var i=t.call(this)||this;return i.data=e,i.skinName="dadou_result",i}return __extends(e,t),e.prototype.createChildren=function(){this.rec_no.addEventListener(egret.TouchEvent.TOUCH_TAP,this.No,this),this.rec_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Yes,this),this.data.resource.attacker==this.data.resource.winner?(this.group_no.visible=!1,this.group_yes.visible=!0):(this.group_no.visible=!0,this.group_yes.visible=!1)},e.prototype.CallBack=function(t){this.cb=t},e.prototype.No=function(){this.cb.args[0]=4,this.cb.back(),this.parent.removeChild(this)},e.prototype.Yes=function(){Director.getInstance().getUser(),this.cb.args[0]=4,this.cb.back(),this.parent.removeChild(this)},e}(eui.Component);__reflect(DaDou_Result.prototype,"DaDou_Result");var DaDou=function(t){function e(e,i){var a=t.call(this)||this;return a.index=0,a.type=0,a.isResult=!1,a.data=e,a.otherdata=i,a.skinName="dadou",a}return __extends(e,t),e.prototype.createChildren=function(){this.img_jump.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Jump,this),this.me=new DogDaDouDragon,this.me.setDate("哈士奇战斗"),this.me.PlayAni1(),this.me.scaleX=1,this.me.x=this.rec0.x,this.me.y=this.rec0.y,this.me.startx=this.rec0.x;var t=(new CallBackFunc).handler(this.CallBack,this,[]);this.me.setCallBack(t),this.addChild(this.me),this.other=new DogDaDouDragon,this.other.setDate("哈士奇战斗"),this.other.scaleX=-1,this.other.PlayAni1(),this.other.x=this.rec1.x,this.other.y=this.rec1.y,this.other.startx=this.rec1.x,this.other.setCallBack(t),this.addChild(this.other),this.init(),this.Begin()},e.prototype.Jump=function(){TWUtils.TwNoTouch(this.img_jump),this.img_jump.touchEnabled=!1,this.index!=this.data.resource.process.length-1&&(this.index=this.data.resource.process.length-1-1)},e.prototype.init=function(){var t=JSON.parse(egret.localStorage.getItem("user"));this.user=t,this.lab_nameme.text=t.nickname,null!=t.avatar&&""!=t.avatar&&(this.img_iconme.source=t.avatar),this.data.resource.attackerFighter.hp=Number(DataUtils.floot(this.data.resource.attackerFighter.hp)),this.data.resource.otherFighter.hp=Number(DataUtils.floot(this.data.resource.otherFighter.hp)),this.lab_hpme.text=this.data.resource.attackerFighter.hp+"/"+this.data.resource.attackerFighter.hp,this.otherdata.catchedStatus?(this.lab_nameother.text=this.otherdata.master.nickname,null!=this.otherdata.master.avatar&&(this.img_iconother.source=this.otherdata.master.avatar)):(this.lab_nameother.text=this.otherdata.nickname,null!=this.otherdata.avatar&&(this.img_iconother.source=this.otherdata.avatar)),this.lab_hpother.text=this.data.resource.otherFighter.hp+"/"+this.data.resource.otherFighter.hp},e.prototype.Touch=function(){this.me.PlayAni3()},e.prototype.Begin=function(){if(this.huihedata=this.data.resource.process[this.index],this.lab_num.text=this.index+1+"",null!=this.huihedata){1==this.huihedata.selfFlag?(this.gongji=this.me,this.beida=this.other,this.type=1):(this.beida=this.me,this.gongji=this.other,this.type=2);var t=this.data.resource.process[this.index+1];null==t&&(this.me.over=!0,this.other.over=!0),this.GongJI()}},e.prototype.CallBack=function(t){switch(t){case 3:this.index++,this.Begin();break;case 1:this.huihedata.sufferer.hp=Number(DataUtils.floot(this.huihedata.sufferer.hp)),this.huihedata.attacker.hp=Number(DataUtils.floot(this.huihedata.attacker.hp)),1==this.type?(this.rec_me.width=this.huihedata.attacker.hp/this.data.resource.attackerFighter.hp*200,this.rec_other.width=this.huihedata.sufferer.hp/this.data.resource.otherFighter.hp*200,this.lab_hpother.text=this.huihedata.sufferer.hp+"/"+this.data.resource.otherFighter.hp,this.lab_hpme.text=this.huihedata.attacker.hp+"/"+this.data.resource.attackerFighter.hp,this.huihedata.sufferer.hp<0&&(this.lab_hpother.text="0/"+this.data.resource.otherFighter.hp,this.rec_other.width=0),this.huihedata.attacker.hp<0&&(this.lab_hpme.text="0/"+this.data.resource.attackerFighter.hp,this.rec_me.width=0)):(this.rec_other.width=this.huihedata.attacker.hp/this.data.resource.otherFighter.hp*200,this.rec_me.width=this.huihedata.sufferer.hp/this.data.resource.attackerFighter.hp*200,this.lab_hpother.text=this.huihedata.attacker.hp+"/"+this.data.resource.otherFighter.hp,this.lab_hpme.text=this.huihedata.sufferer.hp+"/"+this.data.resource.attackerFighter.hp,this.huihedata.sufferer.hp<0&&(this.lab_hpme.text="0/"+this.data.resource.attackerFighter.hp,this.rec_me.width=0),this.huihedata.attacker.hp<0&&(this.lab_hpother.text="0/"+this.data.resource.otherFighter.hp,this.rec_other.width=0)),this.SouShang();break;case 2:if(this.img_jump.visible=!1,!this.isResult){this.isResult=!0;var e=new DaDou_Result(this.data),i=(new CallBackFunc).handler(this.CallBack,this,[]);e.CallBack(i),e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x=e.width/2,e.y=e.height/2,e.scaleX=.4,e.scaleY=.4,egret.Tween.get(e).to({scaleX:1,scaleY:1},300),this.addChild(e)}break;case 4:Director.getInstance().removeSceneNoTw(this)}},e.prototype.GongJI=function(){this.gongji.PlayAni3()},e.prototype.SouShang=function(){this.beida.PlayAni2(),this.lab_shanghai.text="- "+DataUtils.floot(this.huihedata.realDamage),this.lab_shanghai.y=this.beida.y,this.lab_shanghai.x=this.beida.x+200*this.beida.scaleX-this.lab_shanghai.width/2,this.lab_shanghai.anchorOffsetX=this.lab_shanghai.width/2,this.lab_shanghai.anchorOffsetY=this.lab_shanghai.height/2,this.lab_shanghai.scaleX=1,this.lab_shanghai.scaleY=1,egret.Tween.get(this.lab_shanghai).to({y:this.lab_shanghai.y-100,scaleX:1.5,scaleY:1.5,alpha:.4},1500).to({alpha:0})},e.prototype.start=function(){},e}(eui.Component);__reflect(DaDou.prototype,"DaDou");var GenBan_Item=function(t){function e(){var e=t.call(this)||this;return e.skinName="genban_item",e}return __extends(e,t),e.prototype.createChildren=function(){this.rec_yes.addEventListener("touchTap",this.Touch,this),this.genban=Director.getInstance().gameLayer.getChildByName("genban")},e.prototype.dataChanged=function(){this.lab_name.text=this.data.nickname,null!=this.data.avatar&&""!=this.data.avatar?this.img_icon.source=this.data.avatar:this.img_icon.source="icon1_png",this.data.catchedStatus||(this.img_youzhuren.visible=!1,this.rec_yes.fillColor=3130162)},e.prototype.Touch=function(){if(this.data.catchedStatus)return this.data.master.username&&(this.user=JSON.parse(egret.localStorage.getItem("user")),this.user.username==this.data.master.username)?void PopoP.getTips("他已经是您的跟班了,请换一个人抓捕"):void Director.getInstance().pushSceneNoTw(new QingGenBan(this.data));var t=this,e={user_id:this.data._id,work_id:this.genban._id};FachUtils.Post("/cathSlave/cath",e,function(e){e.status?(Director.getInstance().popScene(),Director.getInstance().pushScene(new DaDou(e,t.data))):PopoP.getTips(e.message)},function(t){})},e}(eui.ItemRenderer);__reflect(GenBan_Item.prototype,"GenBan_Item");var GenBan=function(t){function e(){var e=t.call(this)||this;return e.skinName="genban",e.name="genban",e}return __extends(e,t),e.prototype.createChildren=function(){this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.lab_huan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.HuanYiPi,this),this.init()},e.prototype.setDate=function(t){this.data=t,this._id=this.data.work_id},e.prototype.HuanYiPi=function(){this.init()},e.prototype.init=function(){var t=this,e={count:9};FachUtils.Post("/cathSlave/randusers",e,function(e){e.status&&(t.list.dataProvider=new eui.ArrayCollection(e.resource),t.list.itemRenderer=GenBan_Item,t.group.validateNow())},function(t){})},e.prototype.Close=function(){Director.getInstance().removeSceneNoTw(this)},e}(eui.Component);__reflect(GenBan.prototype,"GenBan");var QiangDao=function(t){function e(){var e=t.call(this)||this;return e.skinName="qiangdao",e}return __extends(e,t),e.prototype.createChildren=function(){this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.QiangHuiLai,this),this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZhuaGenBan,this)},e.prototype.setDate=function(t){this.data=t,this.init()},e.prototype.setCb=function(t){this.cb=t},e.prototype.init=function(){null!=this.data.other.avatar&&""!=this.data.other.avatar?this.img_icon.source=this.data.avatar:this.img_icon.source="icon1_png",this.lab_name.text=this.data.other.nickname},e.prototype.QiangHuiLai=function(){this.Yes(),null!=this.cb&&this.cb.back()},e.prototype.Yes=function(){var t=this,e={user_id:this.data._id,work_id:this.data.work_id};FachUtils.Post("/cathSlave/cath",e,function(e){e.status?Director.getInstance().pushScene(new DaDou(e,t.data)):PopoP.getTips(e.message),Director.getInstance().removeScene(t)},function(t){})},e.prototype.ZhuaGenBan=function(){Director.getInstance().pushScene(new GenBan),Director.getInstance().removeScene(this),null!=this.cb&&this.cb.back()},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e}(eui.Component);__reflect(QiangDao.prototype,"QiangDao");var QingGenBan=function(t){function e(e){var i=t.call(this)||this;return i.data=e,i.skinName="qianggenban",i}return __extends(e,t),e.prototype.createChildren=function(){this.img_close.addEventListener("touchTap",this.Close,this),this.img_yes.addEventListener("touchTap",this.Yes,this),this.init()},e.prototype.init=function(){this.lab_name.text=this.data.master.nickname,null!=this.data.master.avatar&&""!=this.data.master.avatar?this.img_icon.source=this.data.avatar:this.img_icon.source="icon1_png"},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e.prototype.Yes=function(){var t=this,e={user_id:this.data._id,work_id:this.data.work_id};FachUtils.Post("/cathSlave/cath",e,function(e){e.status?Director.getInstance().pushScene(new DaDou(e,t.data)):PopoP.getTips(e.message),Director.getInstance().removeScene(t)},function(t){})},e}(eui.Component);__reflect(QingGenBan.prototype,"QingGenBan");var ChongZhi=function(t){function e(){var e=t.call(this)||this;return e.price=0,e.type=1,e.skinName="chongzhi",e}return __extends(e,t),e.prototype.createChildren=function(){this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchBtn,this),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchBtn,this),this.btn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchBtn,this),this.btn4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchBtn,this),this.btn5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchBtn,this),this.btn6.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchBtn,this),this.btn7.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchBtn,this),this.btn8.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchBtn,this),this.btn9.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchBtn,this),this.rec_alipay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchRec,this),this.rec_wechat.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchRec,this),this.rec_bank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchRec,this),this.rec_alipay.name="1",this.rec_alipay.name="2",this.rec_alipay.name="3"},e.prototype.TouchBtn=function(t){this.price=Number(t.target.name)},e.prototype.TouchRec=function(t){this.type=Number(t.target.name),this.img_type.x=t.target.x},e.prototype.Close=function(){Director.getInstance().removeSceneNoTw(this)},e}(eui.Component);__reflect(ChongZhi.prototype,"ChongZhi");var GeRen_ShengJi=function(t){function e(){var e=t.call(this)||this;return e.skinName="geren_shengji",e}return __extends(e,t),e.prototype.createChildren=function(){this.img_shengji.addEventListener("touchTap",this.ShengJi,this),this.lab_close.addEventListener("touchTap",this.Close,this),this.addEventListener(GameEvent.getUserInfo,this.init,this),this.init()},e.prototype.init=function(){var t=this;FachUtils.Get("/user/ability",function(e){e.status&&(t.lab_shengming.text=DataUtils.floot(e.resource.hp),t.lab_qizhi.text=DataUtils.floot(e.resource.vitality),t.lab_baoji.text=DataUtils.floot(DataUtils.mul(100,e.resource.crit_rate))+"%",t.lab_gold.text=DataUtils.floot(e.resource.upGradeGold))},function(t){}),this.user=JSON.parse(egret.localStorage.getItem("user")),this.lab_lv.text=this.user["class"],this.lab_jingyan.text=parseInt(this.user.experience)-(parseInt(this.user.nextExe)-this.user.needExe)+"/"+(parseInt(this.user.nextExe)-(parseInt(this.user.nextExe)-this.user.needExe)),this.lab_name.text=this.user.nickname,null!=this.user.avatar&&""!=this.user.avatar?this.img_icon.source=this.user.avatar:this.img_icon.source="icon1_png";var e=DataUtils.sub(this.user.nextExe,this.user.needExe),i=DataUtils.div(this.user.experience-e,this.user.needExe);0>=i?i=0:i>=1&&(i=1),this.user.needExe<=0&&(i=1),this.rec_jingyan.width=400*i+20},e.prototype.Close=function(){Director.getInstance().removeSceneNoTw(this)},e.prototype.ShengJi=function(){var t=this;FachUtils.Get("/user/upgrade",function(e){if(e.status){Director.getInstance().getUser(!0);var i=new ShengJi_CG(e.resource);t.addChild(i),PopoP.getTips(e.message)}else PopoP.getTips(e.message)},function(t){})},e}(eui.Component);__reflect(GeRen_ShengJi.prototype,"GeRen_ShengJi");var GeRen=function(t){function e(){var e=t.call(this)||this;
return e.skinName="geren",e}return __extends(e,t),e.prototype.createChildren=function(){var t=new egret.Shape,e=egret.GradientType.LINEAR,i=[13890554,16777215],a=[1,1],s=[255,0],n=new egret.Matrix;n.createGradientBox(375,667,30,375,667),t.graphics.beginGradientFill(e,i,a,s,n),t.graphics.drawRect(0,0,600,1334),this.addChildAt(t,0),this.addListener(),this.init()},e.prototype.addListener=function(){this.rec_close.addEventListener("touchTap",this.Close,this),this.group_guanjia.addEventListener("touchTap",this.GuanJia,this),this.group_gonggao.addEventListener("touchTap",this.GongGao,this),this.group_yaoqing.addEventListener("touchTap",this.YaoQing,this),this.rec_sehngji.addEventListener("touchTap",this.ShengJi,this),this.img_add_zuanshi.addEventListener("touchTap",this.ZuanShi,this)},e.prototype.GuanJia=function(){this.user.guanjiaTime&&this.user.guanjiaTime>=(new Date).getTime()-Director.getInstance().ShiJianCha?Director.getInstance().pushScene(new GuanJia2):Director.getInstance().pushScene(new GuanJia_XiangQing)},e.prototype.ZuanShi=function(){Director.getInstance().pushScene(new ChongZhi)},e.prototype.GongGao=function(){Director.getInstance().pushSceneNoTw(new GongGao)},e.prototype.YaoQing=function(){PopoP.getTips("暂未开放")},e.prototype.ShengJi=function(){Director.getInstance().pushSceneNoTw(new GeRen_ShengJi),this.Close()},e.prototype.init=function(){var t=JSON.parse(egret.localStorage.getItem("user"));this.user=t,this.lab_name.text=t.nickname,this.lab_id.text=t.userid,this.lab_zuanshi.text=DataUtils.floot(t.dimond),this.lab_lv.text=this.user["class"],null!=this.user.avatar&&""!=this.user.avatar?this.img_icon.source=this.user.avatar:this.img_icon.source="icon1_png";var e=DataUtils.sub(this.user.nextExe,this.user.needExe),i=DataUtils.div(this.user.experience-e,this.user.needExe);this.user.experience>=this.user.nextExe?this.img_needUp.visible=!0:this.img_needUp.visible=!1,-1==this.user.needExe&&(this.img_needUp.visible=!1),0>=i?i=0:i>=1&&(i=1),this.user.needExe<=0&&(i=1),this.rec_jingyan.width=300*i,this.group_zhuren.height=0,this.group_zhuren.visible=!1},e.prototype.Close=function(){Director.getInstance().removeSceneHeng(this)},e}(eui.Component);__reflect(GeRen.prototype,"GeRen");var GongGao=function(t){function e(){var e=t.call(this)||this;return e.skinName="gonggao",e}return __extends(e,t),e.prototype.createChildren=function(){this.lab_close.addEventListener("touchTap",this.Close,this);var t=this;FachUtils.Get("/message/notes/1/1",function(e){if(e.status){if(0==e.sum)return void PopoP.getTips("暂无公告信息");t.lab_title.text=e.resource[0].title,t.lab_content.text=e.resource[0].content,t.lab_time.text=DataUtils.format("yyyy-MM-dd hh:mm",new Date(e.resource[0].createTime))}},function(t){})},e.prototype.Close=function(){Director.getInstance().removeSceneNoTw(this)},e}(eui.Component);__reflect(GongGao.prototype,"GongGao");var ShengJi_CG=function(t){function e(e){var i=t.call(this)||this;return i.data=e,i.skinName="shengji_chenggong",i}return __extends(e,t),e.prototype.createChildren=function(){this.addEventListener("touchTap",this.Close,this),this.lab_lvlast.text=this.data[0]["class"],this.lab_hpLast.text=this.data[0].setting.hp,this.lab_qizhiLast.text=this.data[0].setting.vitality,this.lab_baojiLast.text=DataUtils.floot(DataUtils.mul(100,this.data[0].setting.crit_rate))+"%",this.lab_lv.text=this.data[1]["class"],this.lab_hp.text=this.data[1].setting.hp,this.lab_qizhi.text=this.data[1].setting.vitality,this.lab_baoji.text=DataUtils.floot(DataUtils.mul(100,this.data[1].setting.crit_rate))+"%"},e.prototype.Close=function(){this.parent.removeChild(this)},e}(eui.Component);__reflect(ShengJi_CG.prototype,"ShengJi_CG");var GuanJia_XiangQing=function(t){function e(){var e=t.call(this)||this;return e.skinName="guanjia_xiangqing",e}return __extends(e,t),e.prototype.createChildren=function(){this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.img_guyong.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GuYong,this),this.lab_price.text=SysTemSet.set.guanjiaDimond},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e.prototype.GuYong=function(){FachUtils.Get("/user/buyGuanjia",function(t){t.status&&Director.getInstance().getUser(),PopoP.getTips(t.message)},function(t){})},e}(eui.Component);__reflect(GuanJia_XiangQing.prototype,"GuanJia_XiangQing");var GuanJia=function(){function t(){}return t}();__reflect(GuanJia.prototype,"GuanJia");var GuanJia2=function(t){function e(){var e=t.call(this)||this;return e.skinName="guanjia2",e}return __extends(e,t),e.prototype.createChildren=function(){var t=JSON.parse(egret.localStorage.getItem("user")),e=(new Date).getTime()-Director.getInstance().ShiJianCha;console.log(DataUtils.format("yyyy-MM-dd",new Date(t.guanjiaTime))),this.lab_time.text=DataUtils.TimeToStr((t.guanjiaTime-e)/1e3),this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this)},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e}(eui.Component);__reflect(GuanJia2.prototype,"GuanJia2");var BeiTou=function(t){function e(e){var i=t.call(this)||this;return i.data=e,i.skinName="beitou",i}return __extends(e,t),e.prototype.createChildren=function(){this.data.news.stealers.length>1?this.labs.text="等":this.labs.text="",null!=this.data.news.stealers[0].avatar&&""!=this.data.news.stealers[0].avatar?this.img_icon.source=this.data.news.stealers[0].avatar:this.img_icon.source="icon1_png",this.lab_text.text=this.data.news.stealers[0].username,this.lab_num.text=DataUtils.floot(this.data.news.hb)+"元",this.img_yes.addEventListener("touchTap",this.Yes,this),this.img_close.addEventListener("touchTap",this.Close,this)},e.prototype.Yes=function(){var t=this,e={ids:this.data.news.ttRecordIds};FachUtils.Post("/plant/steal/read",e,function(e){Director.getInstance().removeSceneNoTw(t)},function(t){})},e.prototype.Close=function(){Director.getInstance().removeSceneNoTw(this)},e}(eui.Component);__reflect(BeiTou.prototype,"BeiTou");var BaHe_JInDu=function(){function t(){}return t}();__reflect(BaHe_JInDu.prototype,"BaHe_JInDu");var HaoYou_Add=function(t){function e(){var e=t.call(this)||this;return e.skinName="haoyou_add",e}return __extends(e,t),e.prototype.createChildren=function(){this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.btn_sousuo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.SouSuo,this);var t=JSON.parse(egret.localStorage.getItem("user"));this.lab_myid.text="我的ID: "+t.userid;var e=Director.getInstance().gameLayer.getChildByName("game");e.rec_haoyou.visible=!1},e.prototype.SouSuo=function(){var t=this;return""==this.ed_sousuo.text?void PopoP.getTips("请输入要搜索的账号"):void FachUtils.Get("/user/search/"+this.ed_sousuo.text,function(e){if(e.status){var i=[e.resource];t.list.dataProvider=new eui.ArrayCollection(i),t.list.itemRenderer=HaoYou_Add_Item,t.group.validateNow()}else PopoP.getTips(e.message)},function(t){})},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e}(eui.Component);__reflect(HaoYou_Add.prototype,"HaoYou_Add");var HaoYou_Iten=function(t){function e(){var e=t.call(this)||this;return e.skinName="haoyou_item",e.timer=new DateTimer(1e3),e.timer.addEventListener(egret.TimerEvent.TIMER,e.Timer,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.Removed,e),e.img_hongbao.addEventListener(egret.TouchEvent.TOUCH_TAP,e.TouQuHongBao,e),e.img_yong.addEventListener(egret.TouchEvent.TOUCH_TAP,e.TouchYongJin,e),e}return __extends(e,t),e.prototype.TouchYongJin=function(t){this.img_yong.localToGlobal(this.img_yong.x,this.img_yong.y);PopoP.getTips("佣金功能暂未开放")},e.prototype.dataChanged=function(){null!=this.data.avatar&&""!=this.data.avatar?this.img.source=this.data.avatar:this.img.source="icon1_png",this.lab_name.text=this.data.nickname,this.lab_userid.text=this.data.userid,this.data.commisonCanSteal?(this.img_yong.visible=!0,this.img_yong.parent.setChildIndex(this.img_yong,1)):(this.img_yong.visible=!1,this.img_yong.parent.setChildIndex(this.img_yong,0)),1==this.data.nextHavest?this.data.nextHavestTime<=(new Date).getTime()-Director.getInstance().ShiJianCha?(this.lab_note.text="",this.lab_jishi.text="",this.img_hongbao.visible=!0):this.data.commisonCanSteal||(this.lab_jishi.text=DataUtils.DaoJiShi(this.data.nextHavestTime),this.img_hongbao.visible=!1,this.timer.start()):(this.timer.stop(),this.lab_note.text="",this.lab_jishi.text="",this.img_hongbao.visible=!1)},e.prototype.Timer=function(){this.lab_jishi.text=DataUtils.DaoJiShi(this.data.nextHavestTime),this.data.nextHavestTime<=(new Date).getTime()-Director.getInstance().ShiJianCha&&(this.timer.stop(),this.lab_note.text="",this.lab_jishi.text="",this.img_hongbao.visible=!0)},e.prototype.TouQuHongBao=function(t){var e=this,i={};FachUtils.Post("/plant/plt/steal/"+this.data._id,i,function(i){if(i.status){var a=DataUtils.add(DataUtils.add(DataUtils.add(i.resource.ess,i.resource.experience),i.resource.gold),i.resource.hb);if(0==a)return PopoP.getTips("偷取失败,此用户已被偷光光了"),void(e.img_hongbao.visible=!1);var s=new GameTitle(1,t,e.img_hongbao,i.resource,e.data);Director.getInstance().gameLayer.addChild(s)}else PopoP.getTips(i.message)},function(t){})},e.prototype.Removed=function(){this.timer.stop()},e}(eui.ItemRenderer);__reflect(HaoYou_Iten.prototype,"HaoYou_Iten");var HaoYou_New_Item=function(t){function e(){var e=t.call(this)||this;return e.skinName="haoyou_add_item",e}return __extends(e,t),e.prototype.createChildren=function(){this.btn_yes.label="同意添加",this.btn_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Add,this)},e.prototype.dataChanged=function(){this.img.source=this.data.from_avatar,null!=this.data.from_avatar&&""!=this.data.from_avatar?this.img.source=this.data.from_avatar:this.img.source="icon1_png",this.lab_name.text=this.data.from_nickname,this.lab_userid.text=this.data.from},e.prototype.Add=function(){var t=this,e={status:1};FachUtils.Post("/user/aplly/"+this.data._id,e,function(e){if(e.status){t.btn_yes.label="已添加";var i=Director.getInstance().gameLayer.getChildByName("haoyou");i.data=[],i.init()}else PopoP.getTips(e.message)},function(t){})},e}(eui.ItemRenderer);__reflect(HaoYou_New_Item.prototype,"HaoYou_New_Item");var HaoYou_New=function(t){function e(){var e=t.call(this)||this;return e.data=[],e.skinName="haoyou_new",e}return __extends(e,t),e.prototype.createChildren=function(){this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.init()},e.prototype.init=function(){var t=this;FachUtils.Get("/user/apllys",function(e){e.status?(t.list.dataProvider=new eui.ArrayCollection(e.resource),t.list.itemRenderer=HaoYou_New_Item,t.group.validateNow()):PopoP.getTips(e.message)},function(t){})},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e}(eui.Component);__reflect(HaoYou_New.prototype,"HaoYou_New");var HaoYou_TiShi=function(t){function e(e,i,a){var s=t.call(this)||this;return s.type=e,s.data=i,s.hbdata=a,s.skinName="haoyou_tishi",s}return __extends(e,t),e.prototype.createChildren=function(){this.img_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Yes,this),this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Yes,this),1==this.type?(this.lab_title.text="你抢到好友的红包",this.img_money.source="hongbao2_png"):(this.lab_title.text="你抢到好友的佣金",this.img_money.source="hy_yongjin_png"),this.lab_num.text=DataUtils.floot(this.hbdata.hb)+"元",this.lab_text.text=this.data.nickname},e.prototype.Yes=function(){this.parent.removeChild(this)},e}(eui.Component);__reflect(HaoYou_TiShi.prototype,"HaoYou_TiShi");var HaoYou=function(t){function e(){var e=t.call(this)||this;return e.sum=0,e.yeshu=1,e.data=[],e.skinName="haoyou",e}return __extends(e,t),e.prototype.createChildren=function(){this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.rec_add.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchAdd,this),this.rec_new.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchNew,this),this.rec_wechat.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchWechat,this),this.rec_add.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.change,this),this.rec_new.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.change,this),this.rec_wechat.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.change,this),this.addEventListener(egret.Event.REMOVED,this.Remove,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.Remove,this),this.lab_more.addEventListener(egret.TouchEvent.TOUCH_TAP,this.More,this);var t=Director.getInstance().gameLayer.getChildByName("game");this.rec_haoyou.visible=t.rec_haoyou.visible,this.init()},e.prototype.Remove=function(t){},e.prototype.init=function(){var t=this;FachUtils.Get("/user/friends/"+this.yeshu+"/30",function(e){e.status?(t.data=t.data.concat(e.resource),t.list.dataProvider=new eui.ArrayCollection(t.data),t.list.itemRenderer=HaoYou_Iten,t.group.validateNow(),t.sum=e.sum):PopoP.getTips(e.message)},function(t){})},e.prototype.More=function(){return this.data.length>=this.sum?(PopoP.getTips("暂无更多数据"),void this.lab_more.parent.removeChild(this.lab_more)):(this.yeshu++,void this.init())},e.prototype.TouchAdd=function(t){Director.getInstance().pushScene(new HaoYou_Add)},e.prototype.TouchNew=function(t){this.rec_haoyou.visible=!1,Director.getInstance().pushScene(new HaoYou_New)},e.prototype.TouchWechat=function(t){JsToApp(this)},e.prototype.CallBack=function(){console.log("回调成功")},e.prototype.change=function(t){var e=t.target;e.fillColor=10606827,egret.setTimeout(function(){e.fillColor=16777215},this,100)},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e}(eui.Component);__reflect(HaoYou.prototype,"HaoYou");var HongBaoZhengDuo=function(t){function e(){var e=t.call(this)||this;return e.skinName="hongbaozhengduo",e}return __extends(e,t),e.prototype.createChildren=function(){this.img_close.addEventListener("touchTap",this.Close,this),this.btn_canjia.addEventListener("touchTap",this.CanJia,this)},e.prototype.setBack=function(t,e){this.data=t,this.cb=e,this.lab_content.text=this.data.tugSetting.gameRule},e.prototype.CanJia=function(){var t=this;FachUtils.Get("/tug/joinTug",function(e){e.status&&(t.data.joinStatus=1,t.cb.back(),Director.getInstance().removeScene(t)),PopoP.getTips(e.message)},function(t){})},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e}(eui.Component);__reflect(HongBaoZhengDuo.prototype,"HongBaoZhengDuo");var JiaGong_Item=function(t){function e(){var e=t.call(this)||this;return e.unClock=!1,e.skinName="jiagong_item",e}return __extends(e,t),e.prototype.createChildren=function(){var t=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0];this.colorFlilter=new egret.ColorMatrixFilter(t),this.user=JSON.parse(egret.localStorage.getItem("user"))},e.prototype.dataChanged=function(){this.img.source=Fach.host+this.data.img,this.lab_name.text=this.data.name,this.user["class"]>=this.data.u_class?(this.img.filters=null,this.unClock=!0):(this.img.filters=[this.colorFlilter],this.unClock=!1)},e.prototype.Onselect=function(){this.rec_select.visible=!0},e.prototype.OnCancelSelect=function(){this.rec_select.visible=!1},e.prototype.getCurrentState=function(){return this.selected?this.Onselect():this.OnCancelSelect(),this.selected+""},e}(eui.ItemRenderer);__reflect(JiaGong_Item.prototype,"JiaGong_Item");var JiaGong=function(t){function e(){var e=t.call(this)||this;return e.selectItem=null,e.skinName="jiagong",e.name="jiagong",e}return __extends(e,t),e.prototype.createChildren=function(){this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.btn_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.TouchYes,this),this.list.addEventListener(egret.Event.CHANGING,this.Changing,this),this.list.addEventListener(egret.Event.CHANGE,this.TouchItem,this),this.jishi=new JiShi,this.group_jindu.addChildAt(this.jishi,0),this.initDate()},e.prototype.initDate=function(){var t=this;FachUtils.Get("/workshop/overView",function(e){if(e.status){t.selectDate=e.resource.displayGoods,t.init(t.selectDate);var i=e.resource.goodsArr;t.list.dataProvider=new eui.ArrayCollection(i),t.list.itemRenderer=JiaGong_Item,t.list.selectedIndex=0}},function(t){})},e.prototype.init=function(t){this.img.source=Fach.host+t.img,this.lab_name.text=t.name,this.lab_jinghua.text="x"+DataUtils.floot(t.plt_sessence),this.lab_num_daoju.text="x"+DataUtils.floot(t.needCount),this.img.addEventListener(egret.Event.COMPLETE,this.Size.bind(this,this.img,this.group_img),this),this.img_daoju.source=Fach.host+t.prop.img,this.img_daoju.addEventListener(egret.Event.COMPLETE,this.Size.bind(this,this.img_daoju,this.group_daoju),this),this.lab_daoju.text=t.prop.name,this.img_daoju.maxWidth=this.group_daoju.width,this.img_daoju.maxHeight=this.group_daoju.height,this.img.maxWidth=this.group_img.width,this.img.maxHeight=this.group_img.height,0==this.selectDate.status?(this.btn_yes.source="btn_jiagong1_png",this.jishi.setDate(t.time,0),this.lab_note.text="",this.selectDate=t):this.selectDate._id==t._id?(this.lab_note.text="",1==this.selectDate.status?(this.lab_jiagong.text="加工中",this.jishi.setDate(1e3*t.time+t.produceTime,1,t.produceTime),this.btn_yes.source=""):2==this.selectDate.status&&(this.jishi.setDate(1e3*t.time+t.produceTime,2),this.lab_jiagong.text="加工完成",this.btn_yes.source="btn_jiagong3_png")):(this.jishi.setDate(t.time,0),this.lab_jiagong.text="加工需耗时:"+t.time,this.btn_yes.source="",this.lab_note.text="请先等待其他商品加工完成")},e.prototype.Size=function(t,e){if(t.width>e.width){var i=e.width/t.width;t.height=t.height*i,t.width=t.width*i}if(t.height>e.height){var a=e.height/t.height;t.height=t.height*a,t.width=t.width*a}},e.prototype.Close=function(){SoundsMgr.clickCell(),Director.getInstance().removeScene(this)},e.prototype.TouchItem=function(t){var e=this.list.getChildAt(this.list.selectedIndex);this.init(e.data)},e.prototype.Changing=function(t){var e=this.list.getChildAt(this.list.selectedIndex);e.unClock||(t.preventDefault(),PopoP.getTips("此商品将于"+e.data.u_class+"级解锁"))},e.prototype.TouchYes=function(){0==this.selectDate.status?this.Yes():1==this.selectDate.status||2==this.selectDate.status&&this.TiQu()},e.prototype.Yes=function(){var t=this;FachUtils.Get("/workshop/produce/"+this.selectDate._id,function(e){e.status?(t.initDate(),Director.getInstance().getUser()):PopoP.getTips(e.message)},function(t){PopoP.getTips(t.message)})},e.prototype.TiQu=function(){var t=this;FachUtils.Get("/workshop/harvest",function(e){e.status?(Director.getInstance().gameLayer.addChild(new LingQu(e.resource)),t.Close()):PopoP.getTips(e.message)},function(t){PopoP.getTips(t.message)})},e}(eui.Component);__reflect(JiaGong.prototype,"JiaGong");var JiShi=function(t){function e(e){var i=t.call(this)||this;return i.sumTime=e,i.skinName="jishi",i}return __extends(e,t),e.prototype.createChildren=function(){this.timer=new DateTimer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,this.Timer,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.Removed,this),this.addEventListener(egret.Event.ENTER_FRAME,this.Frame,this)},e.prototype.setDate=function(t,e,i){switch(this.status=e,e){case 0:this.timer.stop(),this.lab.text="加工需耗时:"+DataUtils.TimeToStr(t);break;case 1:this.startTime=i,this.sumTime=t,this.timer.start(),this.lab.text="剩余时间:  "+DataUtils.DaoJiShi(this.sumTime);break;case 2:this.timer.stop(),this.lab.text="加工完成"}},e.prototype.Timer=function(){if(this.lab.text="剩余时间:  "+DataUtils.DaoJiShi(this.sumTime),this.sumTime<=(new Date).getTime()-Director.getInstance().ShiJianCha){this.timer.stop(),this.lab.text="加工完成";var t=Director.getInstance().gameLayer.getChildByName("jiagong");t.initDate(),this.img.scaleY=1}},e.prototype.Frame=function(){1==this.status?(this.img.width=(this.sumTime-this.startTime-((new Date).getTime()-Director.getInstance().ShiJianCha-this.startTime))/(this.sumTime-this.startTime)*399,this.img.width>400&&(this.img.width=399),this.img.width<=20&&(this.img.scaleY=.9),this.img.width<=10&&(this.img.scaleY=.8)):(this.img.width=399,this.img.scaleY=1)},e.prototype.Removed=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.Frame,this),this.timer.stop()},e}(eui.Component);__reflect(JiShi.prototype,"JiShi");var LingQu=function(t){function e(e){var i=t.call(this)||this;return i.data=e,i.skinName="lingqu",i}return __extends(e,t),e.prototype.createChildren=function(){SoundsMgr.win(),this.img_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Yes,this),this.lab_name.text=this.data.name,this.img.source=Fach.host+this.data.img},e.prototype.Yes=function(){var t=Director.getInstance().gameLayer.getChildByName("game");t.houseCom(Fach.host+this.data.img),this.parent.removeChild(this)},e}(eui.Component);__reflect(LingQu.prototype,"LingQu");var KuaiDi=function(t){function e(e){var i=t.call(this)||this;return i.data=e,i.skinName="kuaidi",i}return __extends(e,t),e.prototype.createChildren=function(){if(this.lab_num.text="x "+this.data.count,this.img.source=Fach.host+this.data.img,this.lab_name.text=this.data.name,this.btn_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Yes,this),this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.user=JSON.parse(egret.localStorage.getItem("user")),1==this.user.addressed){this.ed_name.text=this.user.name,this.ed_pohone.text=this.user.phone;var t=this.user.address.split(":");this.ed_sheng.text=t[0],this.ed_shi.text=t[1],this.ed_qu.text=t[2],this.ed_zhen.text=t[3],this.ed_jie.text=t[4]}},e.prototype.Close=function(){SoundsMgr.clickCell(),Director.getInstance().removeScene(this)},e.prototype.Yes=function(){var t=this;if(""==this.ed_pohone.text||""==this.ed_name.text)return void PopoP.getTips("请输入完整信息");var e=this.ed_sheng.text+":"+this.ed_shi.text+":"+this.ed_qu.text+":"+this.ed_zhen.text+":"+this.ed_jie.text,i={address:e,name:this.ed_name.text,phone:this.ed_pohone.text};FachUtils.Post("/workshop/sendToHome/"+this.data._id,i,function(e){e.status?(PopoP.getTips(e.message),t.updateAddress(),t.Close()):PopoP.getTips(e.message)},function(t){PopoP.getTips(t.message)})},e.prototype.updateAddress=function(){var t=this.ed_sheng.text+":"+this.ed_shi.text+":"+this.ed_qu.text+":"+this.ed_zhen.text+":"+this.ed_jie.text,e={address:t,name:this.ed_name.text,phone:this.ed_pohone.text},i=Director.getInstance().gameLayer.getChildByName("cangku");FachUtils.Post("/user/updateUser",e,function(t){t.status&&i.init()},function(t){})},e}(eui.Component);__reflect(KuaiDi.prototype,"KuaiDi");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.Complete,e),e.skinName="resource/skin/loding.exml",e}return __extends(e,t),e.prototype.Complete=function(){this.createChildren2()},e.prototype.createChildren2=function(){this.shape=new egret.Shape,this.shape.graphics.beginFill(255),this.shape.graphics.drawRect(0,0,338,13),this.shape.graphics.endFill(),this.shape.x=this.jindu.x-this.jindu.width,this.shape.y=this.jindu.y,this.jindu.mask=this.shape,this.addChild(this.shape),RES.loadGroup("preload")},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e,this.shape.x=this.jindu.x+t/e*this.jindu.width-this.jindu.width},e}(eui.Component);__reflect(LoadingUI.prototype,"LoadingUI");var ResLoading=function(t){function e(){var e=t.call(this)||this;return e.loadGroups=[],e.skinName="ResLoadingSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addStage,e),e}return __extends(e,t),e.getInstance=function(){return null==this.loading&&(this.loading=new e),this.loading},e.prototype.addStage=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.update,this)},e.prototype.update=function(){this.circle.rotation+=3},e.prototype.setProgress=function(t,e){this.textLabel.text=t+"/"+e},e}(eui.Component);__reflect(ResLoading.prototype,"ResLoading");var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e.isgetUser=!1,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("loding")},e.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName?(this.getUser(),this.loadingView.textField.text="信息同步中...",RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene()):"loding"==t.groupName&&(egret.Capabilities.isMobile||(this.stage.orientation=egret.OrientationMode.AUTO,this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView))},e.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.isgetUser&&(this.stage.removeChild(this.loadingView),this.startCreateScene())},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.startCreateScene=function(){egret.Ticker.getInstance().register(function(t){dragonBones.WorldClock.clock.advanceTime(t/1e3)},this),RES.loadGroup("game"),Director.getInstance().initWithMain(this.stage),Director.getInstance().pushSceneNoTw(new Game)},e.prototype.getUser=function(){var t=this,e=this.getUrlParam("userid"),i=e.split("/?token=");FachUtils.Get("/user/serverUpto/"+i[0]+"/"+i[1],function(e){if(e.status){var a=CryptoJS.HmacMD5(i[0],"paipai").toString();t.Login(i[0],a)}else PopoP.getTips("数据对接失败")},function(t){PopoP.getTips(t.message)})},e.prototype.Login=function(t,e){var i=this;Fach.readToken("/user/login",Fach.getToken("/user/login",t,e),function(t){var a=t.currentTarget,s=JSON.parse(a.response);if(101==s.statusCode){var n=JSON.parse(a.response).resource.user;n.password=CryptoJS.HmacMD5(e,e).toString(),egret.localStorage.setItem("user",JSON.stringify(n)),i.isgetUser=!0,i.createScene()}else i.loadingView.textField.text="信息传输出错,请重新打开",PopoP.getTips(s.message)},function(t){i.loadingView.textField.text="信息传输出错,请重新打开";var e=t.currentTarget;e.getAllResponseHeaders();if(null!=e){var a=JSON.parse(e.response);401==a.statusCode?PopoP.getTips("账号密码错误"):403==a.statusCode?PopoP.getTips("您的账号已被冻结,请联系管理员"):PopoP.getTips("联网失败")}else PopoP.getTips("联网失败")})},e.prototype.getUrlParam=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?i[2]:null},e}(eui.UILayer);__reflect(Main.prototype,"Main");var PaiHang_Item=function(t){function e(){var e=t.call(this)||this;return e.skinName="paihang_item",e}return __extends(e,t),e.prototype.dataChanged=function(){this.itemIndex<3?(this.img_pai.source="paihang_"+(this.itemIndex+1)+"_png",this.lab_paiming.text=""):(this.img_pai.source="paihang_4_png",this.lab_paiming.text=this.itemIndex+1+""),this.lab_name.text=this.data.name,this.lab_hongbao.text=DataUtils.floot(this.data.hb)+"",null!=this.data.avatar&&""!=this.data.avatar?this.img_icon.source=this.data.avatar:this.img_icon.source="icon1_png"},e}(eui.ItemRenderer);__reflect(PaiHang_Item.prototype,"PaiHang_Item");var PaiHang=function(t){function e(){var e=t.call(this)||this;return e.sum=0,e.yeshu=1,e.data=[],e.type=1,e.skinName="paihang",e}return __extends(e,t),e.prototype.createChildren=function(){this.rad1.addEventListener("touchTap",this.Rad1,this),this.rad2.addEventListener("touchTap",this.Rad2,this),this.lab_close.addEventListener("touchTap",this.Close,this),this.lab_more.addEventListener(egret.TouchEvent.TOUCH_TAP,this.More,this),this.init()},e.prototype.Rad1=function(){this.lab_more.visible=!0,this.yeshu=1,this.type=1,this.data=[],this.sum=0,this.init()},e.prototype.Rad2=function(){this.lab_more.visible=!0,this.yeshu=1,this.type=2,this.data=[],this.sum=0,this.init()},e.prototype.Close=function(){Director.getInstance().removeSceneNoTw(this)},e.prototype.init=function(){var t=this,e={type:this.type};FachUtils.Post("/user/rank/"+this.yeshu+"/10",e,function(e){e.status?(t.data=t.data.concat(e.resource),t.list.dataProvider=new eui.ArrayCollection(t.data),t.list.itemRenderer=PaiHang_Item,t.group.validateNow(),t.sum=e.sum):(t.list.dataProvider=new eui.ArrayCollection(t.data),t.list.itemRenderer=PaiHang_Item,t.group.validateNow(),PopoP.getTips(e.message))},function(t){})},e.prototype.More=function(){return this.data.length>=this.sum?(PopoP.getTips("暂无更多数据"),void(this.lab_more.visible=!1)):(this.yeshu++,void this.init())},e}(eui.Component);__reflect(PaiHang.prototype,"PaiHang");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,a){function s(t){e.call(a,t)}function n(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),i.call(a))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var TiXian=function(t){function e(){var e=t.call(this)||this;return e.skinName="tixian",e}return __extends(e,t),e.prototype.createChildren=function(){this.lab_close.addEventListener("touchTap",this.Close,this),this.img_tixian.addEventListener("touchTap",this.TiXian,this),this.user=JSON.parse(egret.localStorage.getItem("user")),this.initView(),this.lab_num.text=DataUtils.floot(this.user.hb)+" 元"},e.prototype.initView=function(){var t=new egret.Shape,e=egret.GradientType.LINEAR,i=[13890554,16777215],a=[1,1],s=[255,0],n=new egret.Matrix;n.createGradientBox(375,667,30,375,667),t.graphics.beginGradientFill(e,i,a,s,n),t.graphics.drawRect(0,0,750,1334),this.addChildAt(t,0)},e.prototype.TiXian=function(){TWUtils.TwCanTouch(this.img_tixian),this.user.hb<30?PopoP.getTips("满30元才能提现哦~"):PopoP.getTips("提现功能暂未开放")},e.prototype.Close=function(){Director.getInstance().removeSceneNoTw(this)},e}(eui.Component);__reflect(TiXian.prototype,"TiXian");var AnimalDragon=function(t){function e(e,i){var a=t.call(this)||this;return a.isWeiShi=!1,a.bili=i,a.nam=e,a.addEventListener(egret.Event.REMOVED_FROM_STAGE,a.onTimer,a),a.start(),a.container=new eui.Group,a.addChild(a.container),a}return __extends(e,t),e.prototype.start=function(){},e.prototype.setDate=function(t){if(""==t)return void this.container.removeChildren();this.nam=t,null!=this.armature&&this.armature.dispose(),this.container.removeChildren();var e=RES.getRes(this.nam+"_ske_json"),i=RES.getRes(this.nam+"_tex_json"),a=RES.getRes(this.nam+"_tex_png"),s=dragonBones.EgretFactory.factory;s.clear(!1),s.addSkeletonData(dragonBones.DataParser.parseDragonBonesData(e)),s.addTextureAtlas(new dragonBones.EgretTextureAtlas(a,i)),this.armature=s.buildArmature("armatureName"),this.animation=this.armature.animation,this.armatureDisplay=this.armature.getDisplay(),dragonBones.WorldClock.clock.add(this.armature),this.container.addChild(this.armatureDisplay),this.armatureDisplay.y=0-this.armatureDisplay.height/2,this.PlayAni2(),this.armature.hasEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE)||this.armature.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.loop_com,this)
},e.prototype.PlayAni1=function(){this.armature.animation.gotoAndPlay("走路")},e.prototype.PlayAni2=function(){this.armature.animation.gotoAndPlay("吃食")},e.prototype.PlayAni3=function(){this.armature.animation.gotoAndPlay("待机")},e.prototype.PlayAni4=function(){this.armature.removeEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.loop_com,this),this.armature.animation.gotoAndPlay("newAnimation")},e.prototype.onTimer=function(){dragonBones.WorldClock.clock.remove(this.armature),this.armature.dispose(),egret.stopTick(this.onTicker,this)},e.prototype.frame_event=function(t){console.log("armature 播放到了一个关键帧！ 帧标签为：",t.frameLabel)},e.prototype.loop_com=function(t){var e=Math.floor(2*Math.random());switch(e){case 0:this.PlayAni2();break;case 1:this.PlayAni3()}},e.prototype.onTicker=function(t){this._time||(this._time=t);var e=t,i=e-this._time;return this._time=e,dragonBones.WorldClock.clock.advanceTime(i/1e3),!1},e}(eui.Group);__reflect(AnimalDragon.prototype,"AnimalDragon");var BaHeDragon=function(t){function e(e,i){var a=t.call(this)||this;return a.isWeiShi=!1,a.bili=i,a.nam=e,a.addEventListener(egret.Event.REMOVED_FROM_STAGE,a.onTimer,a),a.start(),a}return __extends(e,t),e.prototype.start=function(){this.container=new eui.Group,this.addChild(this.container)},e.prototype.setDate=function(t){if(""==t)return void this.container.removeChildren();this.nam=t,null!=this.armature&&this.armature.dispose(),this.container.removeChildren();var e=RES.getRes(this.nam+"_ske_json"),i=RES.getRes(this.nam+"_tex_json"),a=RES.getRes(this.nam+"_tex_png"),s=dragonBones.EgretFactory.factory;s.clear(!1),s.addSkeletonData(dragonBones.DataParser.parseDragonBonesData(e)),s.addTextureAtlas(new dragonBones.EgretTextureAtlas(a,i)),this.armature=s.buildArmature("armatureName"),this.animation=this.armature.animation,this.armatureDisplay=this.armature.getDisplay(),dragonBones.WorldClock.clock.add(this.armature),console.log(this.container),this.container.addChild(this.armatureDisplay),this.armatureDisplay.y=0-this.armatureDisplay.height/2,this.PlayAni1(),!this.armature.hasEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE)},e.prototype.PlayAni1=function(){this.armature.animation.gotoAndPlay("红包拔河-待机")},e.prototype.PlayAni2=function(){this.type=1,this.armature.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.loop_com,this),this.armature.animation.gotoAndPlay("红包拔河-甲方胜利起身")},e.prototype.PlayAni3=function(){this.armature.animation.gotoAndPlay("红包拔河-甲方胜利持续欢呼")},e.prototype.PlayAni4=function(){this.type=2,this.armature.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.loop_com,this),this.armature.animation.gotoAndPlay("红包拔河-乙方胜利起身")},e.prototype.PlayAni5=function(){this.armature.animation.gotoAndPlay("拔河比赛-乙方胜利欢呼")},e.prototype.onTimer=function(){dragonBones.WorldClock.clock.remove(this.armature),this.armature.dispose(),egret.stopTick(this.onTicker,this)},e.prototype.frame_event=function(t){console.log("armature 播放到了一个关键帧！ 帧标签为：",t.frameLabel)},e.prototype.loop_com=function(t){switch(this.type){case 1:this.PlayAni3();break;case 2:this.PlayAni5()}},e.prototype.onTicker=function(t){this._time||(this._time=t);var e=t,i=e-this._time;return this._time=e,dragonBones.WorldClock.clock.advanceTime(i/1e3),!1},e}(eui.Group);__reflect(BaHeDragon.prototype,"BaHeDragon");var CallBackFunc=function(){function t(){this.callBack=null,this.thisObj=null,this.args=[]}return t.prototype.handler=function(t,e,i){return this.callBack=t,this.thisObj=e,this.args=i,this},t.prototype.exec=function(t){return void 0===t&&(t=null),t&&(this.args=t),null!=this.callBack&&null!=this.thisObj?this.callBack.apply(this.thisObj,this.args):void 0},t.prototype.back=function(){return null!=this.callBack&&null!=this.thisObj?this.callBack.apply(this.thisObj,this.args):void 0},t}();__reflect(CallBackFunc.prototype,"CallBackFunc");var ChaKan=function(t){function e(e,i){var a=t.call(this)||this;return a.data=e,a.num=i,a.skinName="resource/skin/main/chakan.exml",a.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,a.Close,a),a.initDate(),a}return __extends(e,t),e.prototype.initDate=function(){this.lab_time.text=DataUtils.datePase(this.data.createTime),1==this.num?this.lab_content.text=this.data.note:this.lab_content.text=this.data.content},e.prototype.Close=function(){SoundsMgr.clickCell(),this.parent.removeChild(this)},e}(eui.Component);__reflect(ChaKan.prototype,"ChaKan");var ChangAn=function(t){function e(e){var i=t.call(this)||this;return i.skinName="resource/skin/changan.exml",i.lab_shouhuo.text=DataUtils.div(Math.floor(DataUtils.mul(e.number,100)),100)+"只",e.pond>=12?i.lab_shengyu.text=DataUtils.div(Math.floor(DataUtils.mul(Fach.max3-e.number,100)),100)+"只":e.pond>=6?i.lab_shengyu.text=DataUtils.div(Math.floor(DataUtils.mul(Fach.max2-e.number,100)),100)+"只":e.pond>=0&&(i.lab_shengyu.text=DataUtils.div(Math.floor(DataUtils.mul(Fach.max1-e.number,100)),100)+"只"),i}return __extends(e,t),e}(eui.Component);__reflect(ChangAn.prototype,"ChangAn");var DataUtils=function(){function t(){}return t.datePase=function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},t.add=function(e,i){var a,s,n;try{a=e.toString().split(".")[1].length}catch(o){a=0}try{s=i.toString().split(".")[1].length}catch(o){s=0}return n=Math.pow(10,Math.max(a,s)),(t.mul(e,n)+t.mul(i,n))/n},t.sub=function(e,i){var a,s,n;try{a=e.toString().split(".")[1].length}catch(o){a=0}try{s=i.toString().split(".")[1].length}catch(o){s=0}return n=Math.pow(10,Math.max(a,s)),(t.mul(e,n)-t.mul(i,n))/n},t.mul=function(t,e){var i=0,a=t.toString(),s=e.toString();try{i+=a.split(".")[1].length}catch(n){}try{i+=s.split(".")[1].length}catch(n){}return Number(a.replace(".",""))*Number(s.replace(".",""))/Math.pow(10,i)},t.div=function(e,i){var a,s,n=0,o=0;try{n=e.toString().split(".")[1].length}catch(r){}try{o=i.toString().split(".")[1].length}catch(r){}return a=Number(e.toString().replace(".","")),s=Number(i.toString().replace(".","")),t.mul(a/s,Math.pow(10,o-n))},t.floot=function(e){return t.div(Math.floor(t.mul(Number(e),100)),100)+""},t.floot2=function(e){return t.div(Math.floor(t.mul(Number(e),1e3)),1e3)+""},t.format=function(t,e){var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in i)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[a]:("00"+i[a]).substr((""+i[a]).length)));return t},t.SuiJi=function(){var t=300*Math.random(),e=100*Math.random();100*Math.random();return t+e},t.DaoJiShi=function(e){var i=(new Date).getTime()-Director.getInstance().ShiJianCha,a=new Date(e).getTime(),s="";if(a>i){var n=t.div(a-i,1e3);if(60>n)s=10>n?"00:00:0"+Math.floor(n):"00:00:"+Math.floor(n);else if(3600>n){var o=Math.floor(t.div(n,60)),r=Math.floor(t.sub(n,t.mul(o,60)));s="00:"+(10>o?"0"+o:o)+":"+(10>r?"0"+r:r)}else if(n>=3600){var h=Math.floor(t.div(n,3600)),o=Math.floor(t.div(t.sub(n,t.mul(h,3600)),60)),r=Math.floor(n-3600*h-60*o);s=(10>h?"0"+h:h)+":"+(10>o?"0"+o:o)+":"+(10>r?"0"+r:r)}else if(n>=86400){var c=n-t.mul(Math.floor(t.div(n,86400)),86400);s=Math.floor(t.div(n,86400))+"天"+Math.floor(t.div(c,3600))+"个小时"}}else s="00:00:00";return s},t.TimeToStr=function(e){var i="";if(60>e)i=Math.floor(e)+"秒";else if(3600>e)i=Math.floor(t.div(e,60))+"分钟";else if(86400>e){var a=e-t.mul(Math.floor(t.div(e,3600)),3600);i=Math.floor(t.div(e,3600))+"个小时"+Math.floor(t.div(a,60))+"分"}else if(e>=86400){var s=e-t.mul(Math.floor(t.div(e,86400)),86400);i=Math.floor(t.div(e,86400))+"天"+Math.floor(t.div(s,3600))+"个小时"}return i},t.getBili=function(e){if(isNaN(Number(e)))return"NaN";var i=t.floot(t.mul(Number(e),100))+"%";return i},t}();__reflect(DataUtils.prototype,"DataUtils");var Director=function(){function t(){this.stackLayer=[],this.gameLayer=null,this.rects=[],this.ShiJianCha=0}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.initWithMain=function(t){null==this.gameLayer&&(this.gameLayer=egret.MainContext.instance.stage)},t.prototype.addListener=function(){egret.MainContext.instance.stage.addEventListener(egret.Event.ACTIVATE,function(){SoundsMgr.value=1,null!=SoundsMgr._bgm_channel&&(SoundsMgr._bgm_channel.volume=SoundsMgr.value)},this),egret.MainContext.instance.stage.addEventListener(egret.Event.DEACTIVATE,function(){SoundsMgr.value=0,null!=SoundsMgr._bgm_channel&&(SoundsMgr._bgm_channel.volume=SoundsMgr.value)},this)},t.prototype.getRect=function(){var t=new eui.Rect;return t.x=0,t.y=0,t.width=750,t.height=1334,t.fillColor=0,t.alpha=.15,this.rects.push(t),t},t.prototype.repleaceScene=function(t){null!=this.gameLayer&&null!=t&&(this.gameLayer.removeChildren(),this.gameLayer.addChild(t),this.stackLayer=[],this.rects=[],this.stackLayer.push(t))},t.prototype.pushScene=function(t){null!=this.gameLayer&&null!=t&&(this.gameLayer.addChild(this.getRect()),this.gameLayer.addChild(t),t.y=-t.height,egret.Tween.get(t).to({y:0},300),this.stackLayer.push(t))},t.prototype.pushSceneScal=function(t){null!=this.gameLayer&&null!=t&&(this.gameLayer.addChild(this.getRect()),t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x=t.width/2,t.y=t.height/2,t.scaleX=.4,t.scaleY=.4,egret.Tween.get(t).to({scaleX:1,scaleY:1},300),this.gameLayer.addChild(t),this.stackLayer.push(t))},t.prototype.pushSceneHeng=function(t){null!=this.gameLayer&&null!=t&&(this.gameLayer.addChild(this.getRect()),this.gameLayer.addChild(t),t.x=-t.width,egret.Tween.get(t).to({x:0},300),this.stackLayer.push(t))},t.prototype.pushSceneNoTw=function(t){null!=this.gameLayer&&null!=t&&(this.gameLayer.addChild(this.getRect()),this.gameLayer.addChild(t),this.stackLayer.push(t))},t.prototype.removeScene=function(t){if(null!=this.gameLayer){var e=this.gameLayer.getChildIndex(t),i=this;e>=0&&t.parent==this.gameLayer&&(egret.Tween.get(t).to({y:this.gameLayer.height},300).call(function(){console.log("this.gameLayer.removeChild(layer)"),i.gameLayer.removeChild(t)}),this.removeByElements(this.stackLayer,t)),this.rects.length>0&&this.rects[this.rects.length-1].parent==this.gameLayer&&(this.gameLayer.removeChild(this.rects[this.rects.length-1]),this.removeByElements(this.rects,this.rects[this.rects.length-1]))}},t.prototype.removeSceneHeng=function(t){if(null!=this.gameLayer){var e=this.gameLayer.getChildIndex(t),i=this;e>=0&&t.parent==this.gameLayer&&(egret.Tween.get(t).to({x:-this.gameLayer.width},300).call(function(){i.gameLayer.removeChild(t)}),this.removeByElements(this.stackLayer,t)),this.rects.length>0&&this.rects[this.rects.length-1].parent==this.gameLayer&&(this.gameLayer.removeChild(this.rects[this.rects.length-1]),this.removeByElements(this.rects,this.rects[this.rects.length-1]))}},t.prototype.removeSceneNoTw=function(t){if(null!=this.gameLayer){var e=this.gameLayer.getChildIndex(t),i=this;e>=0&&t.parent==this.gameLayer&&(i.gameLayer.removeChild(t),this.removeByElements(this.stackLayer,t)),this.rects.length>0&&this.rects[this.rects.length-1].parent==this.gameLayer&&(this.gameLayer.removeChild(this.rects[this.rects.length-1]),this.removeByElements(this.rects,this.rects[this.rects.length-1]))}},t.prototype.popScene=function(){if(null!=this.gameLayer){var t=this.stackLayer.length;if(t>0){var e=this.stackLayer[t-1];e.parent==this.gameLayer&&(this.gameLayer.removeChild(e),this.removeByElements(this.stackLayer,e))}this.rects.length>0&&this.rects[this.rects.length-1].parent==this.gameLayer&&(this.gameLayer.removeChild(this.rects[this.rects.length-1]),this.removeByElements(this.rects,this.rects[this.rects.length-1]))}},t.prototype.getLastScene=function(){if(null!=this.gameLayer){var t=this.stackLayer.length;if(t>0){var e=this.stackLayer[t-1];return e}}},t.prototype.removeByElements=function(t,e){for(var i=-1,a=t.length,s=0;a>s;s++)if(t[s]==e){i=s;break}i>=0&&t.splice(i,1)},t.prototype.getUser=function(t){var e=this;if(egret.localStorage.getItem("user"))FachUtils.Get2("/user/login",function(i){if(i.status){var a=JSON.parse(egret.localStorage.getItem("user"));a=__assign({},a,i.resource.user),egret.localStorage.setItem("user",JSON.stringify(a));var s=i.resource.currentTime,n=(new Date).getTime();e.ShiJianCha=n-s,egret.localStorage.setItem("scrollText",i.resource.cf.scrollText+""),SysTemSet.set=i.resource.cf;for(var o=0;o<e.stackLayer.length;o++){var r=e.stackLayer[o];null!=r&&r.dispatchEvent(new GameEvent(GameEvent.getUserInfo))}if(t){var h=i.resource.lands,c=i.resource.landUlcCdts,u=e.gameLayer.getChildByName("game");u.FillData(h,c),u.FillAnimal(i.resource.farms,i.resource.farmUlcCdts)}}else{egret.localStorage.clear();e.gameLayer;PopoP.getTips("登录出错,请重新登录")}},function(t){egret.localStorage.clear();e.gameLayer;PopoP.getTips("登录出错,请重新登录")});else{egret.localStorage.clear();e.gameLayer;PopoP.getTips("登录出错,请重新登录")}},t}();Director.instance=null,__reflect(Director.prototype,"Director");var DogAnimation=function(t){function e(){var e=t.call(this)||this;return e._mcTexture=RES.getRes("run_png"),e._mcData=RES.getRes("run_json"),e.loop=1,e.name="dog",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.station()},e.prototype.station=function(){var t=new egret.MovieClipDataFactory(this._mcData,this._mcTexture),e=new egret.MovieClip(t.generateMovieClipData("run"));e.play(-1),e.x=50,e.y=-0,e.scaleX=1,e.scaleY=1,this.parent.addChild(e)},e}(egret.DisplayObjectContainer);__reflect(DogAnimation.prototype,"DogAnimation");var DogDaDouDragon=function(t){function e(e,i){var a=t.call(this)||this;return a.isWeiShi=!1,a.over=!1,a.fangxiang=1,a.startx=0,a.gongjifinish=!1,a.loopfinish=!1,a.bili=i,a.nam=e,a.addEventListener(egret.Event.REMOVED_FROM_STAGE,a.onTimer,a),a.start(),a.container=new eui.Group,a.addChild(a.container),a}return __extends(e,t),e.prototype.start=function(){},e.prototype.setCallBack=function(t){this.cb=t},e.prototype.setDate=function(t){if(""==t)return void this.container.removeChildren();this.nam=t,null!=this.armature&&this.armature.dispose(),this.container.removeChildren();var e=RES.getRes(this.nam+"_ske_json"),i=RES.getRes(this.nam+"_tex_json"),a=RES.getRes(this.nam+"_tex_png"),s=dragonBones.EgretFactory.factory;s.clear(!1),s.addSkeletonData(dragonBones.DataParser.parseDragonBonesData(e)),s.addTextureAtlas(new dragonBones.EgretTextureAtlas(a,i)),this.armature=s.buildArmature("armatureName"),this.animation=this.armature.animation,this.armatureDisplay=this.armature.getDisplay(),dragonBones.WorldClock.clock.add(this.armature),this.container.addChild(this.armatureDisplay),this.armatureDisplay.y=0+this.armatureDisplay.height/2,this.armatureDisplay.x=0+this.armatureDisplay.width/2,this.animation.timeScale=.8,this.armature.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.loop_com,this),this.armatureDisplay.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,this.frame_event,this),this.armature.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,this.frame_event,this)},e.prototype.Lab=function(t){},e.prototype.PlayAni1=function(){this.actiontyoe=0,this.x=this.startx,this.animation.timeScale=.8,this.armature.animation.gotoAndPlay("哈士奇-待机")},e.prototype.PlayAni2=function(){this.actiontyoe=3,this.animation.timeScale=.8,this.armature.animation.gotoAndPlay("哈士奇-死亡")},e.prototype.PlayAni3=function(){this.actiontyoe=1,this.gongjifinish=!1,this.loopfinish=!1,this.animation.timeScale=1;this.armature.animation.play("哈士奇-攻击",1);this.parent.addChildAt(this,100),egret.Tween.get(this).to({},400).to({x:this.x+300*this.scaleX},300).to({},300).call(function(){this.gongjifinish=!0,this.loopfinish&&(this.x=this.startx)},this),egret.setTimeout(function(){this.cb.args[0]=1,this.cb.back()},this,800)},e.prototype.onTimer=function(){dragonBones.WorldClock.clock.remove(this.armature),this.armature.dispose(),egret.stopTick(this.onTicker,this)},e.prototype.frame_event=function(t){console.log(123),console.log("armature 播放到了一个关键帧！ 帧标签为：",t.frameLabel)},e.prototype.loop_com=function(t){this.x=this.startx,1==this.actiontyoe?(this.loopfinish=!0,this.gongjifinish&&(this.x=this.startx),this.PlayAni1(),egret.setTimeout(function(){null!=this.cb&&(this.cb.args[0]=3,this.cb.back())},this,1500)):3==this.actiontyoe?(this.over?(this.cb.args[0]=2,this.cb.back(),this.armature.animation.gotoAndStopByProgress("哈士奇-死亡",.9)):this.PlayAni1(),this.x=this.startx):0==this.actiontyoe&&(this.x=this.startx)},e.prototype.onTicker=function(t){this._time||(this._time=t);var e=t,i=e-this._time;return this._time=e,dragonBones.WorldClock.clock.advanceTime(i/1e3),!1},e}(eui.Group);__reflect(DogDaDouDragon.prototype,"DogDaDouDragon");var DogDragon=function(t){function e(e){var i=t.call(this)||this;return i.isWeiShi=!1,i.type=0,i.num=0,i.nam=e,i.addEventListener(egret.Event.REMOVED_FROM_STAGE,i.onTimer,i),i.start(),i}return __extends(e,t),e.prototype.start=function(){this.container=new egret.DisplayObjectContainer,this.addChild(this.container),this.container.x=0,this.container.y=0,this.touchEnabled=!1,this.nam="哈士奇";var t=RES.getRes(this.nam+"_ske_json"),e=RES.getRes(this.nam+"_tex_json"),i=RES.getRes(this.nam+"_tex_png"),a=new dragonBones.EgretFactory;a.addSkeletonData(dragonBones.DataParser.parseDragonBonesData(t)),a.addTextureAtlas(new dragonBones.EgretTextureAtlas(i,e)),this.armature=a.buildArmature("armatureName"),this.animation=this.armature.animation,this.armatureDisplay=this.armature.getDisplay(),this.armatureDisplay.scaleX=1,this.armatureDisplay.scaleY=1,dragonBones.WorldClock.clock.add(this.armature),this.container.addChild(this.armatureDisplay),this.armatureDisplay.x=0,this.armatureDisplay.y=0,dragonBones.WorldClock.clock.add(this.armature),this.armature.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.loop_com,this)},e.prototype.PlayAni1=function(){this.type=1,this.armature.animation.gotoAndPlay("狗狗-待机")},e.prototype.PlayAni2=function(){this.type=2,this.armature.animation.gotoAndPlay("狗狗-饥饿")},e.prototype.PlayAni3=function(){this.type=3,this.armature.animation.gotoAndPlay("狗狗-开心升级")},e.prototype.PlayAni4=function(){this.type=4,this.armature.animation.gotoAndPlay("我来抓坏蛋")},e.prototype.PlayAni5=function(){this.type=5,this.armature.animation.gotoAndPlay("狗狗-喂养")},e.prototype.onTimer=function(){egret.stopTick(this.onTicker,this)},e.prototype.frame_event=function(t){console.log("armature 播放到了一个关键帧！ 帧标签为：",t.frameLabel)},e.prototype.loop_com=function(t){3==this.type&&this.num++,2==this.num&&(this.num=0,this.PlayAni1())},e.prototype.onTicker=function(t){this._time||(this._time=t);var e=t,i=e-this._time;return this._time=e,dragonBones.WorldClock.clock.advanceTime(i/1e3),!1},e}(eui.Component);__reflect(DogDragon.prototype,"DogDragon");var Fach=function(){function t(){}return t.getToken=function(e,i,a){if(!a&&!egret.localStorage.getItem("user"))return null;var s="";if(a)return s=CryptoJS.AES.encrypt(e+":"+t.uuid().toString(),CryptoJS.HmacMD5(a,a).toString()).toString(),"bearer "+i+":"+s;if(null==egret.localStorage.getItem("user"))return"";var n=JSON.parse(egret.localStorage.getItem("user"));return null==n.password?"":(s=CryptoJS.AES.encrypt(e+":"+t.uuid().toString(),n.password).toString(),"bearer "+n.username+":"+s)},t.readToken=function(t,e,i,a){var s=new egret.HttpRequest;s.responseType=egret.HttpResponseType.TEXT,s.setRequestHeader("Authorization",e),s.open(this.host+t,egret.HttpMethod.GET),s.send(),s.addEventListener(egret.IOErrorEvent.IO_ERROR,a,this),s.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this),s.addEventListener(egret.Event.COMPLETE,i,this)},t.createToken=function(t,e,i,a,s){var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.setRequestHeader("Authorization",i),n.setRequestHeader("Content-Type","application/json; charset=utf-8"),n.open(this.host+t,egret.HttpMethod.POST),n.send(JSON.stringify(e)),n.addEventListener(egret.IOErrorEvent.IO_ERROR,s,this),n.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this),n.addEventListener(egret.Event.COMPLETE,a,this)},t.onGetComplete=function(t){var e=t.currentTarget;return egret.log("get data : ",JSON.parse(e.response).message),JSON.parse(e.response).message},t.onGetIOError=function(t){t.currentTarget;egret.log("get error : "+t)},t.onGetProgress=function(t){egret.log("get progress : "+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%")},t.createNoToken=function(t,e,i,a){var s=new egret.HttpRequest;s.responseType=egret.HttpResponseType.TEXT,s.setRequestHeader("Content-Type","application/json; charset=utf-8"),s.open(this.host+t,egret.HttpMethod.POST),s.send(JSON.stringify(e)),s.addEventListener(egret.IOErrorEvent.IO_ERROR,a,this),s.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this),s.addEventListener(egret.Event.COMPLETE,i,this)},t.createNoToken2=function(t,e,i,a){var s=new egret.HttpRequest;s.responseType=egret.HttpResponseType.TEXT,s.setRequestHeader("Content-Type","application/json; charset=utf-8"),s.open(t,egret.HttpMethod.POST),s.send(JSON.stringify(e)),s.addEventListener(egret.IOErrorEvent.IO_ERROR,a,this),s.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this),s.addEventListener(egret.Event.COMPLETE,i,this)},t.readNoToken=function(t,e,i){var a=new egret.HttpRequest;a.responseType=egret.HttpResponseType.TEXT,a.setRequestHeader("Authorization","token"),a.open(t,egret.HttpMethod.GET),a.send(),a.addEventListener(egret.IOErrorEvent.IO_ERROR,i,this),a.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this),a.addEventListener(egret.Event.COMPLETE,e,this)},t.uuid=function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},t}();Fach.host="http://47.92.88.214:6100",Fach.path="http://qr.liantu.com/api.php?text=http:///?user=",Fach.min1=300,Fach.max1=800,Fach.min2=1e3,Fach.max2=3e3,Fach.min3=2e3,Fach.max3=5e3,__reflect(Fach.prototype,"Fach");var FachUtils=function(){function t(){}return t.Get=function(t,e,i){var a=ResLoading.getInstance();egret.MainContext.instance.stage.addChild(a),Fach.readToken(t,Fach.getToken(t,null,null),function(t){null!=a.parent&&a.parent.removeChild(a);var i=t.currentTarget;console.log(i.response);var s=JSON.parse(i.response);e(s)},function(t){null!=a.parent&&a.parent.removeChild(a);var e={message:"联网失败"};i(e)})},t.Get2=function(t,e,i){Fach.readToken(t,Fach.getToken(t,null,null),function(t){var i=t.currentTarget;console.log(i.response);var a=JSON.parse(i.response);e(a)},function(t){var e={message:"联网失败"};i(e)})},t.Post=function(t,e,i,a){var s=ResLoading.getInstance();egret.MainContext.instance.stage.addChild(s),Fach.createToken(t,e,Fach.getToken(t,null,null),function(t){null!=s.parent&&s.parent.removeChild(s);var e=t.currentTarget;console.log(e.response);var a=JSON.parse(e.response);i(a)},function(t){null!=s.parent&&s.parent.removeChild(s);var e={message:"联网失败"};a(e)})},t.Post2=function(t,e,i,a){Fach.createToken(t,e,Fach.getToken(t,null,null),function(t){var e=t.currentTarget,a=JSON.parse(e.response);i(a)},function(t){var e={message:"联网失败"};a(e)})},t.PostNoToken=function(t,e,i,a){var s=ResLoading.getInstance();egret.MainContext.instance.stage.addChild(s),Fach.createNoToken(t,e,function(t){null!=s.parent&&s.parent.removeChild(s);var e=t.currentTarget;console.log(e.response);var a=JSON.parse(e.response);i(a)},function(t){null!=s.parent&&s.parent.removeChild(s);var e={message:"联网失败"};a(e)})},t}();__reflect(FachUtils.prototype,"FachUtils");var Far=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getUser=function(){console.log(123)},e.prototype.initDate=function(){},e}(eui.Component);__reflect(Far.prototype,"Far");var Gif_action=function(){function t(){this.loop=1,this.gifStr="",this.onAddToStage()}return t.prototype.onAddToStage=function(){this.mcDataFactory=new egret.MovieClipDataFactory,this.role=new egret.MovieClip,this.role.name="gif",this.role.touchEnabled=!1,this.role.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.Rremove,this)},t.prototype.setDate=function(t){this.gifStr!=t&&this.mcDataFactory.clearCache(),this._mcTexture=RES.getRes(t+"_png"),this._mcData=RES.getRes(t+"_json"),this.mcDataFactory.mcDataSet=this._mcData,this.mcDataFactory.texture=this._mcTexture},t.prototype.Add=function(){},t.prototype.chengZhang=function(){this.role.movieClipData=this.mcDataFactory.generateMovieClipData("1"),this.role.play(-1),this.Add(),this.role.x=this.role.parent.width/2-75,this.role.y=this.role.parent.height-this.role.height},t.prototype.Rremove=function(){this.role.stop()},t.prototype.chengShu=function(){this.role.movieClipData=this.mcDataFactory.generateMovieClipData("2"),this.role.play(-1),this.Add(),this.role.x=this.role.parent.width/2-75,this.role.y=this.role.parent.height-this.role.height+20},t}();__reflect(Gif_action.prototype,"Gif_action");var KongTiShi=function(){function t(){}return t.KO=function(t,e){var i=new egret.TextField;i.text=t,i.size=26,i.textColor=3355443,i.x=e.width/2-i.width/2,i.y=e.height/2-i.height/2,e.addChild(i)},t}();__reflect(KongTiShi.prototype,"KongTiShi");var PopoP=function(){function t(){}return t.getTips=function(t){(new Tips).show(t)},t.playAnimation=function(t,e){if(e){for(var i in t.items)t.items[i].props={loop:!0};t.play()}else t.stop()},t}();__reflect(PopoP.prototype,"PopoP");var QRCode=function(){function t(t){var e=document.getElementById("gameDiv");this.htmlCode=document.createElement("img"),this.htmlCode.src=t,this.htmlCode.style.position="absolute",this.htmlCode.style.display="none",e.appendChild(this.htmlCode)}return t.prototype.showHtmlCode=function(){this.htmlCode&&(this.htmlCode.style.display="inline")},t.prototype.hideHtmlCode=function(){this.htmlCode&&(this.htmlCode.style.display="none")},t.prototype.setPosition=function(t,e,i,a){if(null!=this.htmlCode)if(document.body.clientWidth>document.body.clientHeight){var s=document.body.clientWidth/1334,n=document.body.clientHeight/750;this.htmlCode.style.width=i*s+"px",this.htmlCode.style.height=a*n+"px",this.htmlCode.style.left=t*s+"px",this.htmlCode.style.top=e*n+"px"}else{var s=document.body.clientWidth/750,n=document.body.clientHeight/1334;this.htmlCode.style.width=i*s+"px",this.htmlCode.style.height=a*n+"px",this.htmlCode.style.top=e*n+"px",this.htmlCode.style.left=t*s+"px"}},t.prototype.destroy=function(){this.htmlCode&&(this.htmlCode.parentNode.removeChild(this.htmlCode),this.htmlCode=null)},t}();__reflect(QRCode.prototype,"QRCode");var SoundMenager=function(){function t(){this._bgm=new egret.Sound,this._bgm.load("resource/assets/sound/bg.mp3")}return t.Shared=function(){return null==t.shared&&(t.shared=new t),t.shared},t.prototype.PlayBGM=function(){this.IsMusic&&null==this._bgm_channel&&(this._bgm_channel=this._bgm.play(0,0))},t.prototype.StopBGM=function(){null!=this._bgm_channel&&(this._bgm_channel.stop(),this._bgm_channel=null)},t.prototype.PlayClick=function(){this.IsSound},t.prototype.PlayRight=function(){this.IsSound},t.prototype.PlayWrong=function(){this.IsSound},t.prototype.PlayWord=function(){this.IsSound},Object.defineProperty(t.prototype,"IsMusic",{get:function(){var t=egret.localStorage.getItem("ismusic");return null==t||""==t?!0:"1"==t},set:function(t){t?(egret.localStorage.setItem("ismusic","1"),this.PlayBGM()):(egret.localStorage.setItem("ismusic","0"),this.StopBGM())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsSound",{get:function(){var t=egret.localStorage.getItem("isSound");return null==t||""==t?!0:"1"==t},set:function(t){t?egret.localStorage.setItem("isSound","1"):egret.localStorage.setItem("isSound","0")},enumerable:!0,configurable:!0}),t}();__reflect(SoundMenager.prototype,"SoundMenager");var SoundsMgr=function(){function t(){}return t.playBg=function(){t._bgm=new egret.Sound,t._bgm.addEventListener(egret.Event.COMPLETE,this.Com,this),t._bgm.load("resource/assets/sound/bg.mp3")},t.Com=function(){t.isfinish=!0,Director.getInstance().addListener(),this.PlayBGM()},t.playBtn=function(){},t.PlayBGM=function(){this.isfinish&&t.IsSound()&&null==t._bgm_channel&&(t._bgm_channel=t._bgm.play(0,0),t._bgm_channel.volume=this.value)},t.StopBGM=function(){null!=t._bgm_channel&&(t._bgm_channel.stop(),t._bgm_channel=null)},t.clickCell=function(){},t.removeCell=function(t){t>=6&&(t=6)},t.win=function(){},t.lose=function(){},t.playMusic=function(e){var i=RES.getRes(e.toString());i&&t.IsSound()&&(this.bgSoundChannel=i.play(0,1),this.bgSoundChannel.volume=this.value)},t.setIsSound=function(t){t?egret.localStorage.setItem("isSound","1"):egret.localStorage.setItem("isSound","0")},t.IsSound=function(){var t=egret.localStorage.getItem("isSound");return null==t||""==t?!0:"1"==t},t}();SoundsMgr.bgSoundChannel=null,SoundsMgr.value=1,SoundsMgr.isfinish=!1,__reflect(SoundsMgr.prototype,"SoundsMgr");var SysTemSet=function(){function t(){}return t}();__reflect(SysTemSet.prototype,"SysTemSet");var Tips=function(t){function e(){var e=t.call(this)||this,i=new eui.Rect;return i.fillColor=3355443,i.fillAlpha=.6,i.strokeWeight=2,i.ellipseWidth=30,i.strokeColor=2170398,e.bg=i,e.addChild(e.bg),e.width=121,e.height=30,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.label=new eui.Label,e.addChild(e.label),e.x=egret.MainContext.instance.stage.stageWidth/2,e.y=egret.MainContext.instance.stage.stageHeight-100,egret.MainContext.instance.stage.addChildAt(e,1e5),e.label.touchEnabled=!1,e.bg.touchEnabled=!1,e}return __extends(e,t),e.prototype.show=function(t){this.label.text=t,this.label.anchorOffsetX=this.label.width/2,this.label.anchorOffsetY=this.label.height/2,this.label.x=this.width/2,this.label.y=this.height/2,this.bg.width=this.label.width+50,this.bg.height=this.label.height+35,this.bg.anchorOffsetX=this.bg.width/2,this.bg.anchorOffsetY=this.bg.height/2,this.bg.x=this.width/2,this.bg.y=this.height/2;var e=egret.Tween.get(this);e.to({x:egret.MainContext.instance.stage.stageWidth/2,y:egret.MainContext.instance.stage.stageHeight-200},1500,egret.Ease.backOut).call(this.callback,this)},e.prototype.callback=function(){this.parent.removeChild(this)},e}(egret.DisplayObjectContainer);__reflect(Tips.prototype,"Tips");var TiShi=function(t){function e(e,i){var a=t.call(this)||this;return a.callback=i,a.skinName="resource/skin/tishi.exml",a.btn_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,a.QueRen,a),a.btn_no.addEventListener(egret.TouchEvent.TOUCH_TAP,a.No,a),a.lab_content.text=e,a}return __extends(e,t),e.prototype.initDate=function(){},e.prototype.initListener=function(){},e.prototype.No=function(){this.parent.removeChild(this)},e.prototype.QueRen=function(){this.callback.exec(),this.parent.removeChild(this)},e}(eui.Component);__reflect(TiShi.prototype,"TiShi");var TWUtils=function(){function t(t){this.btn=t}return t.TwCanTouch=function(t){t.touchEnabled=!1,SoundsMgr.playBtn();var e=function(){egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-.1*t.width,y:t.y-.1*t.height},100,egret.Ease.elasticOut).call(function(){t.touchEnabled=!0},this)};egret.Tween.get(t).to({scaleX:.9,scaleY:.9,x:t.x+.1*t.width,y:t.y+.1*t.height},200,egret.Ease.sineIn).call(e,this)},t.Tw=function(t){SoundsMgr.playBtn();var e=function(){egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-.1*t.width,y:t.y-.1*t.height},100,egret.Ease.elasticOut).call(function(){},this)};egret.Tween.get(t).to({scaleX:.9,scaleY:.9,x:t.x+.1*t.width,y:t.y+.1*t.height},200,egret.Ease.sineIn).call(e,this)},t.TwNoTouch=function(t){var e=function(){egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},100,egret.Ease.elasticOut).call(function(){},this)};egret.Tween.get(t).to({scaleX:.5,scaleY:.5,x:t.x+t.width/4,y:t.y+t.height/4},200,egret.Ease.sineIn).call(e,this)},t.playAnimation2=function(t){var e=egret.Tween.get(t);e.to({x:t.x+=20,y:t.y+=20},100,egret.Ease.bounceOut),e.to({x:t.x-=20,y:t.y-=20},100,egret.Ease.bounceIn),e.to({x:t.x+=20,y:t.y+=20},100,egret.Ease.bounceOut),e.to({x:t.x-=20,y:t.y-=20},100,egret.Ease.bounceIn),e.to({x:t.x+=20,y:t.y+=20},100,egret.Ease.bounceOut),e.to({x:t.x-=20,y:t.y-=20},100,egret.Ease.bounceIn)
},t}();__reflect(TWUtils.prototype,"TWUtils");var FenXiang_YaoQIanShu=function(t){function e(){var e=t.call(this)||this;return e.skinName="fenxiang_tidu",e}return __extends(e,t),e.prototype.createChildren=function(){var t=new egret.Shape,e=egret.GradientType.LINEAR,i=[13890554,16777215],a=[1,1],s=[255,0],n=new egret.Matrix;n.createGradientBox(375,667,30,375,667),t.graphics.beginGradientFill(e,i,a,s,n),t.graphics.drawRect(0,0,750,1334),this.addChildAt(t,0),this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.img_fenxiang.addEventListener(egret.TouchEvent.TOUCH_TAP,this.FenXiang,this),this.getJinDu(),this.getFenXiangCanShu(),this.lab_title.text="邀请好友助力  找回丢失红包",this.lab_note.text="邀请更多好友，找回红包越多",this.img.source="fenxiang_yaoqianshu_png"},e.prototype.getFenXiangCanShu=function(){},e.prototype.getJinDu=function(){},e.prototype.FenXiang=function(){},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e.prototype.JSCallbackFunctionName=function(){PopoP.getTips("分享成功")},e}(eui.Component);__reflect(FenXiang_YaoQIanShu.prototype,"FenXiang_YaoQIanShu");var YaoQIanShu_Item=function(t){function e(){var e=t.call(this)||this;return e.skinName="yaoqianshu_item",e}return __extends(e,t),e.prototype.dataChanged=function(){this.lab_hb.text=DataUtils.floot(this.data.hb),this.lab_name.text=this.data.stealFromNick,null!=this.data.userAvatar&&""!=this.data.userAvatar?this.img_icon.source=this.data.userAvatar:this.img_icon.source="icon1_png"},e}(eui.ItemRenderer);__reflect(YaoQIanShu_Item.prototype,"YaoQIanShu_Item");var YaoQianShu=function(t){function e(){var e=t.call(this)||this;return e.jingpin=[],e.skinName="yaoqianshu",e}return __extends(e,t),e.prototype.createChildren=function(){this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.btn_facai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.FaCai,this),this.img_zhaohui.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZhaoHUi,this),this.game=Director.getInstance().gameLayer.getChildByName("game"),this.init()},e.prototype.setType=function(t){var e=this;switch(t){case 1:FachUtils.Get("/message/hbRecord/1/200",function(t){t.status&&(e.list.dataProvider=new eui.ArrayCollection(t.resource),e.list.itemRenderer=YaoQIanShu_Item,e.group.validateNow(),0==t.sum&&PopoP.getTips("您还没有被好友偷取红包"))},function(t){}),this.group_zhaohui.visible=!0,this.group_facai.visible=!1;break;case 2:var i;FachUtils.Get("/hb/offLineRewards",function(t){if(t.status){var a=t.resource.props;0!=t.resource.dimond&&(i={count:t.resource.dimond,name:"钻石",img:"zuanshi4_png",bendi:1},a.push(i)),0!=t.resource.experience&&(i={count:t.resource.experience,name:"经验",img:"jingyan_png",bendi:1},a.push(i)),0!=t.resource.gold&&(i={count:t.resource.gold,name:"金币",img:"gold2_png",bendi:1},a.push(i)),0!=t.resource.hb&&(i={count:t.resource.hb,name:"红包",img:"hongbao2_png",bendi:1},a.push(i)),0!=t.resource.plt_sessence&&(i={count:t.resource.plt_sessence,name:"健康能量",img:"nengliang_png",bendi:1},a.push(i)),0!=t.resource.tl&&(i={count:t.resource.tl,name:"体力",img:"tiliping_png",bendi:1},a.push(i)),e.jingpin=a}},function(t){}),this.group_zhaohui.visible=!1,this.group_facai.visible=!0}},e.prototype.init=function(){},e.prototype.Close=function(){Director.getInstance().removeSceneNoTw(this)},e.prototype.FaCai=function(){var t=this;FachUtils.Get("/hb/offLineRewards/harvest",function(e){e.status?(t.Xiangzi(t.xz1),t.Xiangzi(t.xz2),t.Xiangzi(t.xz3),t.Xiangzi(t.xz4),t.game.img_yqs_menu.visible=!1,egret.setTimeout(function(){t.tw()},t,1500)):PopoP.getTips(e.message)},function(t){})},e.prototype.Xiangzi=function(t){egret.Tween.get(t).to({rotation:-10},100).to({rotation:10},100).to({rotation:-10},100).to({rotation:10},100).to({rotation:-10},100).to({rotation:10},100).to({rotation:-10},100).to({rotation:10},100).to({rotation:-10},100).to({rotation:10},100).to({rotation:-10},100).to({rotation:10},100).to({rotation:0},100).call(function(){t.source="xiangzi2_png"},this)},e.prototype.tw=function(){var t=new BaHe_LingQu;t.setDate(this.jingpin),Director.getInstance().pushSceneScal(t),Director.getInstance().removeSceneNoTw(this)},e.prototype.ZhaoHUi=function(){Director.getInstance().pushSceneNoTw(new FenXiang_YaoQIanShu)},e}(eui.Component);__reflect(YaoQianShu.prototype,"YaoQianShu");var ZhuanPan_Item=function(t){function e(){var e=t.call(this)||this;return e.skinName="zhuanpan_item",e}return __extends(e,t),e.prototype.createChildren=function(){},e.prototype.setDate=function(t){switch(t.type){case 1:this.img.source="jingyan_png",this.lab_name.text="经验",this.lab_num.text="x"+DataUtils.floot(t.experience);break;case 2:this.img.source="nengliang_png",this.lab_name.text="健康能量",this.lab_num.text="x"+DataUtils.floot(t.plt_sessence);break;case 3:this.img.source="gold2_png",this.lab_name.text="金币",this.lab_num.text="x"+DataUtils.floot(t.gold);break;case 4:this.img.source="hongbao2_png",this.lab_name.text="红包",this.lab_num.text="x"+DataUtils.floot(t.hb);break;case 5:this.img.source="tiliping_png",this.lab_name.text="体力瓶",this.lab_num.text="x"+DataUtils.floot(t.tl);break;case 6:this.img.source="zuanshi4_png",this.lab_name.text="钻石",this.lab_num.text="x"+DataUtils.floot(t.dimond);break;case 7:this.lab_name.text=t.propName,this.img.source=Fach.host+t.propImg,this.lab_num.text="x"+DataUtils.floot(t.propCount);break;case 8:this.img.source="xiexiecanyu_png",this.lab_name.text="谢谢参与",this.lab_num.text=""}},e}(eui.Component);__reflect(ZhuanPan_Item.prototype,"ZhuanPan_Item");var ZhuanPan_Result=function(t){function e(){var e=t.call(this)||this;return e.skinName="zhuanpan_result",e}return __extends(e,t),e.prototype.createChildren=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Touch,this)},e.prototype.Touch=function(){this.parent.removeChild(this)},e.prototype.setDate=function(t){switch(t.type){case 1:this.img.source="jingyan_png",this.lab_name.text="经验",this.lab_num.text="x"+DataUtils.floot(t.experience);break;case 2:this.img.source="nengliang_png",this.lab_name.text="健康能量",this.lab_num.text="x"+DataUtils.floot(t.plt_sessence);break;case 3:this.img.source="gold2_png",this.lab_name.text="金币",this.lab_num.text="x"+DataUtils.floot(t.gold);break;case 4:this.img.source="hongbao2_png",this.lab_name.text="红包",this.lab_num.text="x"+DataUtils.floot(t.hb);break;case 5:this.img.source="tiliping_png",this.lab_name.text="体力瓶",this.lab_num.text="x"+DataUtils.floot(t.tl);break;case 6:this.img.source="zuanshi4_png",this.lab_name.text="钻石",this.lab_num.text="x"+DataUtils.floot(t.dimond);break;case 7:this.lab_name.text=t.propName,this.img.source=Fach.host+t.propImg,this.lab_num.text="x"+DataUtils.floot(t.propCount);break;case 8:this.img.source="xiexiecanyu_png",this.lab_name.text="谢谢参与",this.lab_num.text=""}},e}(eui.Component);__reflect(ZhuanPan_Result.prototype,"ZhuanPan_Result");var ZhuanPan_TiShi=function(t){function e(){var e=t.call(this)||this;return e.skinName="zhuanpan_tishi",e}return __extends(e,t),e.prototype.createChildren=function(){this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.img_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Yes,this)},e.prototype.setDate=function(t){switch(this.type=t,this.type){case 1:this.lab_title.text="金币不足",this.img.source="gold2_png",this.lab_note.text="请先种植农场获得金币";break;case 2:this.lab_title.text="幸运券不足",this.img.source="zhaohuanquan_png",this.lab_note.text="是否花费钻石去购买"}},e.prototype.Yes=function(){switch(this.type){case 1:Director.getInstance().removeScene(this);break;case 2:PopoP.getTips("暂不可购买")}},e.prototype.Close=function(){Director.getInstance().removeScene(this)},e}(eui.Component);__reflect(ZhuanPan_TiShi.prototype,"ZhuanPan_TiShi");var ZhuanPan=function(t){function e(){var e=t.call(this)||this;return e.rads=[],e.type=1,e.isStop=!1,e.index=0,e.startindex=0,e.skinName="zhuanpan",e}return __extends(e,t),e.prototype.createChildren=function(){this.lab_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Close,this),this.btn_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Yes,this),this.rec_gold.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Gold,this),this.rec_quan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Quan,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.initView(),this.timer=new egret.Timer(100,0),this.timer.addEventListener(egret.TimerEvent.TIMER,this.XuanZhuan,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.Com,this),this.init()},e.prototype.init=function(){var t=this;FachUtils.Get("/wheelSet/wheels",function(e){e.status&&(t.initDate(e.resource),t.lab_goldnum.text="x"+DataUtils.floot(e.ext.wheelFeeGold),t.lab_goldnum.text="x"+DataUtils.floot(e.ext.wheelFeeCoupon))},function(t){})},e.prototype.initDate=function(t){this.data=t;for(var e=0;e<t.length;e++){var i=new ZhuanPan_Item;i.setDate(t[e]),i.x=this.rads[e].x,i.y=this.rads[e].y,this.addChild(i)}},e.prototype.initView=function(){for(var t=this.getChildIndex(this.rad0),e=0;10>e;e++)this.rads.push(this.getChildAt(t+e))},e.prototype.Quan=function(){this.img_selsect.x=this.rec_quan.x,this.type=2},e.prototype.Gold=function(){this.img_selsect.x=this.rec_gold.x,this.type=1},e.prototype.Com=function(){console.log("Com"),this.startindex=this.index,this.btn_yes.touchEnabled=!0;var t=new ZhuanPan_Result;t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x=t.width/2,t.y=t.height/2,t.scaleX=.4,t.scaleY=.4,egret.Tween.get(t).to({scaleX:1,scaleY:1},200),t.setDate(this.data[this.dataresult.select]),egret.setTimeout(function(){this.addChild(t)},this,500)},e.prototype.remove=function(){console.log("stop"),this.timer.stop()},e.prototype.Yes=function(){if(TWUtils.TwCanTouch(this.btn_yes),this.timer.running)return void PopoP.getTips("转盘转动中....");var t=this,e={type:this.type};this.timer.reset(),this.timer.repeatCount=1e3,FachUtils.Post("/wheelSet/lottery",e,function(e){if(e.status)t.timer.start(),t.dataresult=e.resource,t.timer.repeatCount=t.timer.currentCount-t.timer.currentCount%10+10+e.resource.select+1+(10-t.startindex);else if(102==e.statusCode){var i=new ZhuanPan_TiShi;i.setDate(t.type),Director.getInstance().pushScene(i)}else PopoP.getTips(e.message)},function(t){})},e.prototype.XuanZhuan=function(){console.log(this.index),this.rads[this.index].selected=!0,this.index=this.index+1,10==this.index&&(this.index=0)},e.prototype.Close=function(){return this.timer.running?void PopoP.getTips("转盘转动中...."):void Director.getInstance().removeSceneNoTw(this)},e}(eui.Component);__reflect(ZhuanPan.prototype,"ZhuanPan");